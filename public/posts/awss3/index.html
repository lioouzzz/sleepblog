<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/lioouzzz/sleepblog.git/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=lioouzzz/sleepblog.git/livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>åˆ©ç”¨djangoé–‹ç™¼-å¯¦ç¾AWSS3ä¸Šå‚³åœ–ç‰‡ | ğŸ€ğŸ€ğŸ€</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="æœ¬æ–‡æ•™ä½ å¾è¨»å†Š AWS åˆ°å¯ä»¥åˆ©ç”¨ django é–‹ç™¼ï¼Œå¯¦ç¾ AWSS3 ä¸Šå‚³åœ–ç‰‡åŠŸèƒ½!">
    <meta name="generator" content="Hugo 0.148.2">
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    
      <meta name="author" content = "Elaine Liu">
    

    
<link rel="stylesheet" href="/lioouzzz/sleepblog.git/ananke/css/main.min.css" >



  
    <link rel="stylesheet" href="/lioouzzz/sleepblog.git/css/custom.css">
  

    

    
      
<link rel="shortcut icon" href="/lioouzzz/sleepblog.git/images/20241130%20%e5%80%8b%e4%ba%balogo2.png" type="image/x-icon" />


    

    

    
      <link rel="canonical" href="http://localhost:1313/lioouzzz/sleepblog.git/posts/awss3/">
    

    <meta property="og:url" content="http://localhost:1313/lioouzzz/sleepblog.git/posts/awss3/">
  <meta property="og:site_name" content="ğŸ€ğŸ€ğŸ€">
  <meta property="og:title" content="åˆ©ç”¨djangoé–‹ç™¼-å¯¦ç¾AWSS3ä¸Šå‚³åœ–ç‰‡">
  <meta property="og:description" content="æœ¬æ–‡æ•™ä½ å¾è¨»å†Š AWS åˆ°å¯ä»¥åˆ©ç”¨ django é–‹ç™¼ï¼Œå¯¦ç¾ AWSS3 ä¸Šå‚³åœ–ç‰‡åŠŸèƒ½!">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-02-20T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-02-20T00:00:00+00:00">
    <meta property="article:tag" content="å¾Œç«¯">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="Django">
    <meta property="article:tag" content="AWS">

  <meta itemprop="name" content="åˆ©ç”¨djangoé–‹ç™¼-å¯¦ç¾AWSS3ä¸Šå‚³åœ–ç‰‡">
  <meta itemprop="description" content="æœ¬æ–‡æ•™ä½ å¾è¨»å†Š AWS åˆ°å¯ä»¥åˆ©ç”¨ django é–‹ç™¼ï¼Œå¯¦ç¾ AWSS3 ä¸Šå‚³åœ–ç‰‡åŠŸèƒ½!">
  <meta itemprop="datePublished" content="2025-02-20T00:00:00+00:00">
  <meta itemprop="dateModified" content="2025-02-20T00:00:00+00:00">
  <meta itemprop="wordCount" content="492">
  <meta itemprop="keywords" content="å¾Œç«¯,Python,Django,AWS">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="åˆ©ç”¨djangoé–‹ç™¼-å¯¦ç¾AWSS3ä¸Šå‚³åœ–ç‰‡">
  <meta name="twitter:description" content="æœ¬æ–‡æ•™ä½ å¾è¨»å†Š AWS åˆ°å¯ä»¥åˆ©ç”¨ django é–‹ç™¼ï¼Œå¯¦ç¾ AWSS3 ä¸Šå‚³åœ–ç‰‡åŠŸèƒ½!">

	
  <script src="/lioouzzz/sleepblog.git/js/search.js"></script>
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  
  
  
  <header class="cover bg-center" style="background-image: url('http://localhost:1313/lioouzzz/sleepblog.git/images/dj.png');">
    <div class="bg-black-60">
      <nav class="pv3 ph3 ph4-ns bg-white" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a
      href="/lioouzzz/sleepblog.git/"
      class="f3 fw2 hover-blue no-underline dark-blue dib"
    >
      
      <img src="/lioouzzz/sleepblog.git/images/20241130%20%e5%80%8b%e4%ba%balogo2.png" class="w100 mw5-ns" alt="ğŸ€ğŸ€ğŸ€" />
      
    </a>

    <div class="flex-l items-center">
      <div class="relative mr2">
    <input type="search" 
      class="pa2 br2 ba b--custom-blue" 
      placeholder="æœå°‹..." 
      id="search-input"
      onkeyup="search()">
  </div> 
      <ul class="pl0 mr3">
         
        <li class="list f5 f4-ns fw4 dib mr3">
          <a href="/lioouzzz/sleepblog.git/" class="hover-blue no-underline dark-blue">
            é¦–é 
          </a>
        </li>
          
        <li class="list f5 f4-ns fw4 dib mr3">
          <a href="/lioouzzz/sleepblog.git/posts/" class="hover-blue no-underline dark-blue">
            å…¨éƒ¨æ–‡ç« 
          </a>
        </li>
          
        <li class="list f5 f4-ns fw4 dib mr3 dropdown">
          <a
            href="/lioouzzz/sleepblog.git/categories/"
            class="hover-blue no-underline dark-blue dropdown-toggle"
          >
            æ–‡ç« åˆ†é¡
          </a>
          <ul class="dropdown-menu">
             
            <li>
              <a href="http://localhost:1313/lioouzzz/sleepblog.git/categories/database/">
                database (3)
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/lioouzzz/sleepblog.git/categories/javascripts/">
                javascripts (5)
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/lioouzzz/sleepblog.git/categories/python/">
                python (8)
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/lioouzzz/sleepblog.git/categories/%E5%89%8D%E7%AB%AF/">
                å‰ç«¯ (1)
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/lioouzzz/sleepblog.git/categories/%E5%BE%8C%E7%AB%AF/">
                å¾Œç«¯ (3)
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/lioouzzz/sleepblog.git/categories/%E7%B6%B2%E8%B7%AF%E5%AE%89%E5%85%A8/">
                ç¶²è·¯å®‰å…¨ (1)
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/lioouzzz/sleepblog.git/categories/%E8%B3%87%E5%AE%89/">
                è³‡å®‰ (3)
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/lioouzzz/sleepblog.git/categories/%E8%B3%87%E6%96%99%E7%B5%90%E6%A7%8B/">
                è³‡æ–™çµæ§‹ (1)
              </a>
            </li>
             
          </ul>
        </li>
          
        <li class="list f5 f4-ns fw4 dib mr3">
          <a href="/lioouzzz/sleepblog.git/tags/" class="hover-blue no-underline dark-blue">
            æ–‡ç« æ¨™ç±¤
          </a>
        </li>
         
      </ul>
      
    </div>
  </div>
</nav>

      <div class="tc-l pv6 ph3 ph4-ns">
        
          <div class="f2 f1-l fw2 white-90 mb0 lh-title">åˆ©ç”¨djangoé–‹ç™¼-å¯¦ç¾AWSS3ä¸Šå‚³åœ–ç‰‡</div>
          
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      


  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">åˆ©ç”¨djangoé–‹ç™¼-å¯¦ç¾AWSS3ä¸Šå‚³åœ–ç‰‡</h1>
      
      <p class="tracked">
        By <strong>Elaine Liu</strong>
      </p>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2025-02-20T00:00:00Z">2025å¹´2æœˆ20æ—¥</time>
      

      
      
        <span class="f6 mv4 dib tracked"> - 3 minutes read </span>
        <span class="f6 mv4 dib tracked"> - 492 words </span>
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>æœ¬æ–‡æ•™ä½ å¾è¨»å†Š AWS åˆ°å¯ä»¥åˆ©ç”¨ django é–‹ç™¼ï¼Œå¯¦ç¾ AWSS3 ä¸Šå‚³åœ–ç‰‡åŠŸèƒ½!</p>
<p>ä»¥ä¸‹é€£çµç‚ºè©³ç´° AWS è¨»å†Šæ­¥é©Ÿã€ç”³è«‹ S3ï¼Œè«‹å…ˆæŒ‰ç…§å½±ç‰‡å®Œæˆæ­¥é©Ÿã€‚
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/y12KO8XM6jw?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"></iframe>
    </div>
</p>
<h3 id="aws-s3amazon-simple-storage-service">AWS S3ï¼ˆAmazon Simple Storage Serviceï¼‰</h3>
<p>ç”± AWS æä¾›çš„ç‰©ä»¶å„²å­˜æœå‹™ï¼Œåœ¨ç¾ä»£æ‡‰ç”¨ç¨‹å¼æ¶æ§‹ä¸­ï¼ŒS3 å¸¸å¸¸æ‰®æ¼”è‘—å„²å­˜èˆ‡åˆ†ç™¼éœæ…‹è³‡æºï¼ˆå¦‚åœ–ç‰‡ã€å½±ç‰‡ã€æ–‡ä»¶ç­‰ï¼‰çš„è§’è‰²</p>
<h3 id="ç‚ºä»€éº¼è¦ä½¿ç”¨-aws-s3-æœå‹™">ç‚ºä»€éº¼è¦ä½¿ç”¨ AWS S3 æœå‹™?</h3>
<p>åœ¨ server ç«¯å¦‚æœæœ‰éœæ…‹æª”æ¡ˆ(cssã€åœ–ç‰‡ã€å½±ç‰‡)ï¼Œå¦‚æœç›´æ¥å‚³çµ¦ client ç«¯ï¼Œæ˜¯æœƒéå¸¸æ¶ˆè€— Server è³‡æºï¼Œæ‰€ä»¥æˆ‘å€‘é€šå¸¸æœƒé¿å…é€™æ¨£åšï¼Œé€™æ™‚å¾Œå°±æœƒé¸æ“‡é›²ç«¯æœå‹™ï¼Œé›²ç«¯æœå‹™æœ‰å¾ˆå¤šé¸é …ï¼Œæœ¬æ–‡è‘—é‡ä»‹ç´¹ AWS S3ã€‚
Server ç«¯æœƒæŠŠéœæ…‹æª”ï¼Œå‚³çµ¦ AWS S3ã€‚æˆ–è€…å¾ S3 æ“·å–éœ€è¦çš„è³‡æ–™ï¼Œé€²è¡Œå¾ŒçºŒè™•ç†å¾Œå†å›æ‡‰ client ç«¯ã€‚</p>
<p><strong>å®‰å…¨èˆ‡å­˜å–æ§åˆ¶</strong><br>
ğŸ«—client ç«¯ä¸æœƒç›´æ¥å­˜å– S3ï¼ˆé™¤éæ˜¯å…¬é–‹è³‡æºæˆ–ä½¿ç”¨é ç°½å URLï¼‰ï¼Œè€Œæ˜¯é€é Server ç«¯ä¾†æ§åˆ¶æ¬Šé™å’Œèªè­‰æµç¨‹</p>
<p>ğŸ«—Server ç«¯å¯ä»¥ç”Ÿæˆé ç°½å URLï¼ˆPresigned URLï¼‰ï¼Œè®“ client ç«¯èƒ½åœ¨å—æ§çš„æ™‚é–“å…§ç›´æ¥ä¸Šå‚³æˆ–ä¸‹è¼‰ S3 è³‡æ–™ï¼Œé€™æ¨£æ—¢èƒ½ä¿è­· S3 çš„å­˜å–å®‰å…¨ï¼Œåˆèƒ½æ¸›å°‘ Server çš„è² æ“”ã€‚</p>
<p>ğŸ«—S3 æä¾›é«˜æ“´å±•æ€§ï¼Œç„¡è«–æ˜¯è³‡æ–™é‡æˆ–å­˜å–æ¬¡æ•¸éƒ½å¯ä»¥è¼•é¬†æ‡‰å°ã€‚Server ç«¯å¯ä»¥ä¾è³´ S3 ä¾†å­˜æ”¾ç”¨æˆ¶è³‡æ–™ã€å‚™ä»½æˆ–å…¶ä»–æ‡‰ç”¨ç¨‹å¼è³‡æºï¼Œè€Œä¸å¿…æ“”å¿ƒå„²å­˜ç©ºé–“ä¸è¶³æˆ–ç¶­è­·è¤‡é›œæ€§ã€‚</p>
<p>ğŸ«— å°‡å¤§é‡éœæ…‹è³‡æºå„²å­˜æ–¼ S3ï¼Œå¯ä»¥é™ä½ server ç«¯çš„è² è¼‰ï¼Œä¸¦åˆ©ç”¨ CDNï¼ˆä¾‹å¦‚ Amazon CloudFrontï¼‰å¿«é€Ÿåœ°å°‡è³‡æºåˆ†ç™¼åˆ°å…¨çƒç”¨æˆ¶ã€‚</p>
<h3 id="iam">IAM</h3>
<p><strong>èº«ä»½é©—è­‰èˆ‡æˆæ¬Šç®¡ç†ï¼š</strong>
IAM å…è¨±ä½ å»ºç«‹å’Œç®¡ç† AWS å¸³è™Ÿä¸­çš„ä½¿ç”¨è€…ã€ç¾¤çµ„åŠè§’è‰²ï¼Œä¸¦è³¦äºˆä»–å€‘å° AWS è³‡æºï¼ˆä¾‹å¦‚ S3ï¼‰çš„å­˜å–æ¬Šé™ã€‚é€™æ„å‘³è‘—æ¯å€‹ä½¿ç”¨è€…æˆ–æœå‹™éƒ½å¿…é ˆç¶“é IAM èªè­‰ï¼Œæ‰èƒ½å­˜å– S3 è³‡æºï¼Œå¾è€Œç¢ºä¿åªæœ‰æˆæ¬Šçš„å¯¦é«”å¯ä»¥é€²è¡Œæ“ä½œã€‚</p>
<p><strong>IAM æ”¿ç­–èˆ‡ S3 å­˜å–æ§åˆ¶ï¼š</strong>
IAM æ”¿ç­–æ˜¯ä¸€å€‹åŸºæ–¼ JSON æ ¼å¼çš„æ–‡ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨é€™äº›æ”¿ç­–ä¾†å®šç¾©å…è¨±æˆ–æ‹’çµ•æŸå€‹ä½¿ç”¨è€…ã€ç¾¤çµ„æˆ–è§’è‰²å° S3 é€²è¡Œå…·é«”æ“ä½œï¼ˆä¾‹å¦‚ï¼šè®€å–ã€å¯«å…¥ã€åˆªé™¤ï¼‰çš„æ¬Šé™ã€‚é€™äº›èº«ä»½å±¤ç´šçš„æ”¿ç­–èˆ‡ S3 è‡ªèº«çš„è³‡æºå±¤ç´šç­–ç•¥ï¼ˆBucket Policiesã€ACLsï¼‰å…±åŒä½œç”¨ï¼Œæ±ºå®šäº†æœ€çµ‚çš„å­˜å–æ¬Šé™ã€‚<br>
<strong>è·¨æœå‹™å’Œè·¨å¸³è™Ÿå­˜å–å§”æ´¾ï¼š</strong>
ç•¶ä½ ä½¿ç”¨ EC2 æˆ– Lambda ç­‰æœå‹™æ™‚ï¼Œå¯ä»¥é€é IAM è§’è‰²å®‰å…¨åœ°æˆæ¬Šé€™äº›æœå‹™è¨ªå• S3ï¼Œè€Œç„¡éœ€åœ¨æ‡‰ç”¨ç¨‹å¼ä¸­ç¡¬ç·¨ç¢¼å­˜å–é‡‘é‘°ã€‚<br>
æˆ–æ˜¯å¯ä»¥è¨­è¨ˆ IAM ç­–ç•¥å’Œ S3 Bucket Policiesï¼Œä»¥å…è¨±ä¾†è‡ªå…¶ä»– AWS å¸³è™Ÿçš„ä½¿ç”¨è€…æˆ–è§’è‰²å­˜å–ç‰¹å®š S3 è³‡æºï¼Œå¯¦ç¾è·¨å¸³è™Ÿçš„å®‰å…¨è³‡æºå…±äº«ã€‚</p>
<h3 id="aws-ç”³è«‹æ­¥é©Ÿ">AWS ç”³è«‹æ­¥é©Ÿ</h3>
<p>é¦–å…ˆå…ˆå» AWS å®˜ç¶²é»æ“Šæœå‹™ â‡€ æ‰“ä¸Š IAMâ‡€ åˆ°å„€éŒ¶æ¿ä¸Šé»é¸äººå“¡ï¼Œå‰µç«‹äººå“¡ â‡€ å¡«å¯«ä½¿ç”¨è€…è³‡è¨Š â‡€ è¨±å¯é¸é …å¡«ç›´æ¥é€£æ¥æ”¿ç­– â‡€ æœå°‹ S3â‡€ å‹¾é¸ AmazonS3FullAccessï¼ŒæŒ‰ä¸‹ä¸‹ä¸€æ­¥ã€‚</p>
<p>é¸æ“‡ä½ å‰›å‰›çš„ä½¿ç”¨è€… â‡€ é€²å…¥ç•«é¢ä¹‹å¾Œæœ‰ä¸€å€‹å­˜å–é‡‘é‘° â‡€ å»ºç«‹å­˜å–é‡‘é‘° â‡€ é¸æ“‡æœ¬æ©Ÿä»£ç¢¼ â‡€ ä¸‹ä¸€æ­¥ â‡€ è¦æŠŠé‡‘é‘°è³‡è¨Šè‡ªå·±ä¿å­˜èµ·ä¾† â‡€ å®Œæˆã€‚</p>
<p>é¦–å…ˆå…ˆå» AWS å®˜ç¶²é»æ“Šæœå‹™ â‡€ æ‰“ä¸Š S3 â‡€ å»ºç«‹ bucket(å»ºç«‹å„²å­˜è²¯é«”) â‡€ è¼¸å…¥å­˜å„²é«”åç¨±ã€AWS å€åŸŸ(é è¨­é›ªæ¢¨) â‡€ å„²å­˜</p>
<p>é€™æ™‚å¦‚æœæŠŠæª”æ¡ˆæ”¾åœ¨ bucket æœƒæœ‰ access deny çš„å•é¡Œï¼Œé€™æ˜¯å› ç‚ºæˆ‘å€‘é‚„æ²’èª¿æ•´ bucket çš„æ¬Šé™</p>
<p>S3 â‡€ å„²å­˜è²¯é«” â‡€ ä½ å»ºç«‹çš„å„²å­˜è²¯é«” â‡€ è¨±å¯ â‡€ å°é–å…¬æœ‰å­˜å–æ¬Š â‡€ ç·¨è¼¯ â‡€ å–æ¶ˆå‹¾é¸å°é–æ‰€æœ‰å…¬é–‹å­˜å–æ¬Š â‡€
å‹¾é¸å°é–é€éæ–°çš„å­˜å–æ§åˆ¶æ¸…å–®(ACL)æˆäºˆçš„å°å„²å­˜è²¯é«”å’Œç‰©ä»¶çš„å…¬é–‹å­˜å–æ¬Š â‡€ å‹¾é¸å°é–é€éä»»ä½•å­˜å–æ§åˆ¶æ¸…å–®æˆäºˆçš„å„²å­˜ä¸»é«”å’Œç‰©ä»¶å…¬é–‹å­˜å–æ¬Š â‡€ æŒ‰ä¸‹å„²å­˜è®Šæ›´ã€‚</p>
<p>å¾€ä¸‹æœ‰å€‹å„²å­˜è²¯é«”æ”¿ç­– â‡€ è²¼ä¸Šæ”¿ç­–ç¨‹å¼ç¢¼</p>
<pre tabindex="0"><code>{
    &#34;Version&#34;: &#34;2012-10-17&#34;,
    &#34;Statement&#34;: [
        {
            &#34;Effect&#34;: &#34;Allow&#34;,
            &#34;Principal&#34;: &#34;*&#34;,
            &#34;Action&#34;: &#34;s3:GetObject&#34;,
            &#34;Resource&#34;: &#34;arn:aws:s3:::resudobucket/*&#34;
            &lt;!-- é€™è£¡å¡«è‡ªå·±çš„å„²å­˜è²¯é«”åç¨± --&gt;
        }
    ]
}
</code></pre><h4 id="django-å¯¦ç¾-aws-åœ–ç‰‡ä¸Šå‚³">django å¯¦ç¾ aws åœ–ç‰‡ä¸Šå‚³</h4>
<p>é¦–å…ˆä¸‹è¼‰é€™å…©å€‹å¥—ä»¶ï¼Œé€™è£¡ä½¿ç”¨ poetry è™›æ“¬ç’°å¢ƒ</p>
<pre tabindex="0"><code>poetry add django-storages boto3
</code></pre><p><code>django-storages</code><br>
django çš„æ“´å……å¥—ä»¶ï¼Œæä¾›çµ±ä¸€çš„ä»‹é¢è®“ä½ å¯ä»¥è¼•é¬†ä½¿ç”¨å¤šç¨®å¾Œç«¯å„²å­˜æœå‹™ä¾‹å¦‚ AWS S3ã€Google Cloud Storageã€Azure Storage ç­‰ã€‚</p>
<p><code>boto3</code><br>
æ˜¯ AWS çš„å®˜æ–¹ Python SDKï¼Œæä¾›äº†æ“ä½œ AWS å„é …æœå‹™(ä¾‹å¦‚ S3ã€EC2ã€DynamoDB ç­‰çš„)API
æä¾›ä½éšä¸”éˆæ´»çš„æ“ä½œä»‹é¢ï¼Œå¯ç”¨æ–¼å»ºç«‹ã€é…ç½®åŠç®¡ç† AWS è³‡æºã€‚
åœ¨ä½¿ç”¨ AWS S3 æ™‚ï¼Œdjango-storages å¾€å¾€æœƒä¾è³´ boto3 ä¾†é€²è¡Œå¯¦éš›çš„é€£ç·šå’Œæ“ä½œã€‚</p>
<p>ğŸ è£œå……ä»‹ç´¹ AWS SDKï¼š<br>
æ˜¯ä¸€å¥—ç”± Amazon æä¾›çš„è»Ÿé«”é–‹ç™¼å·¥å…·åŒ…ï¼Œå¹«åŠ©é–‹ç™¼è€…è¼•é¬†æ•´åˆå’Œæ“ä½œ AWS æä¾›çš„å„ç¨®æœå‹™ï¼Œä»¥ä¸‹æ˜¯ä¸»è¦ç‰¹é»å’Œç”¨é€”ã€‚</p>
<p><strong>å¤šèªè¨€æ“ä½œï¼š</strong><br>
AWS SDK æä¾›äº†é‡å°å¤šç¨®ç¨‹å¼èªè¨€çš„åº«ï¼Œè®“ä½¿ç”¨è€…å¯ä»¥æ ¹æ“šæ‰€ä½¿ç”¨çš„èªè¨€ï¼Œå¿«é€Ÿä¸Šæ‰‹ AWS çš„ API</p>
<p><strong>ç°¡åŒ– API å‘¼å«ï¼š</strong><br>
SDK å°è£äº†è¨±å¤šåº•å±¤ç´°ç¯€ï¼ŒåŒ…æ‹¬èªè­‰ã€è«‹æ±‚ç°½ç½²ã€éŒ¯èª¤è™•ç†å’Œé‡è©¦æ©Ÿåˆ¶ï¼Œé–‹ç™¼è€…å¯ä»¥é€éç°¡å–®çš„æ–¹æ³•å‘¼å« AWS æœå‹™ï¼Œç„¡éœ€è™•ç† HTTP è«‹æ±‚ã€‚</p>
<p><strong>æ”¯æ´å¤šé … AWS æœå‹™ï¼š</strong><br>
ç„¡è«–æ˜¯å„²å­˜æœå‹™ï¼ˆS3ï¼‰ã€è¨ˆç®—æœå‹™ï¼ˆEC2ã€Lambdaï¼‰ã€è³‡æ–™åº«ï¼ˆDynamoDBï¼‰æˆ–å…¶ä»– AWS æœå‹™ï¼ŒSDK éƒ½æä¾›äº†ç›¸æ‡‰çš„æ¥å£ï¼Œè®“æ‡‰ç”¨ç¨‹å¼èƒ½å¤ ç„¡ç¸«å°æ¥ AWS ç”Ÿæ…‹ç³»çµ±ã€‚</p>
<p><strong>å®‰å…¨æ€§èˆ‡æœ€ä½³å¯¦è¸ï¼š</strong><br>
AWS SDK å…§å»ºèˆ‡ AWS IAM ç­‰æœå‹™æ•´åˆï¼Œæ–¹ä¾¿è¨­å®šå®‰å…¨æ€§èˆ‡å­˜å–æ¬Šé™ï¼Œä¸¦éµå¾ªæœ€ä½³å¯¦è¸ä¾†ç¢ºä¿æ‡‰ç”¨ç¨‹å¼çš„å®‰å…¨é‹è¡Œã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-PY" data-lang="PY"><span style="display:flex;"><span><span style="color:#75715e">#settings.py</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>INSTALLED_APPS <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;django.contrib.admin&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;django.contrib.auth&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;django.contrib.contenttypes&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;django.contrib.sessions&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;django.contrib.messages&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;django.contrib.staticfiles&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;corsheaders&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;rest_framework&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;users&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;storages&#34;</span>,  <span style="color:#75715e">#åŠ ä¸Šé€™å€‹</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;profiles&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;resumes&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;drf_yasg&#34;</span>,
</span></span><span style="display:flex;"><span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>STORAGES <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;default&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;BACKEND&#34;</span>: <span style="color:#e6db74">&#34;storages.backends.s3boto3.S3Boto3Storage&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;OPTIONS&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;access_key&#34;</span>: os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#34;AWS_ACCESS_KEY_ID&#34;</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;secret_key&#34;</span>: os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#34;AWS_SECRET_ACCESS_KEY&#34;</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;bucket_name&#34;</span>: os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#34;AWS_STORAGE_BUCKET_NAME&#34;</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;region_name&#34;</span>: os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#34;AWS_S3_REGION_NAME&#34;</span>), <span style="color:#75715e">#åˆ©ç”¨ç’°å¢ƒè®Šæ•¸åŒ…èµ·ä¾†ï¼Œå»ºç«‹.envæª”æ¡ˆï¼ŒæŠŠé€™äº›æ•æ„Ÿè³‡è¨Šæ”¾é€²å»</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;staticfiles&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;BACKEND&#34;</span>: <span style="color:#e6db74">&#34;django.contrib.staticfiles.storage.StaticFilesStorage&#34;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>MEDIA_URL <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#34;MEDIA_URL&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>AWS_STORAGE_BUCKET_NAME <span style="color:#f92672">=</span> env(<span style="color:#e6db74">&#34;AWS_STORAGE_BUCKET_NAME&#34;</span>)
</span></span><span style="display:flex;"><span>AWS_S3_CUSTOM_DOMAIN <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>AWS_STORAGE_BUCKET_NAME<span style="color:#e6db74">}</span><span style="color:#e6db74">.s3.amazonaws.com&#34;</span>
</span></span></code></pre></div><p>åœ¨å°æ‡‰çš„ views.pyï¼Œå¯«ä¸Š<code>from rest_framework.parsers import MultiPartParser, FormParser</code><br>
åœ¨ Django REST framework ä¸­ï¼Œè§£æå™¨(Parser)è² è²¬æŠŠ HTTP è«‹æ±‚ä¸­çš„åŸå§‹è³‡æ–™è½‰ç‚º Python åŸç”Ÿè³‡æ–™çµæ§‹ï¼Œä»¥ä¾¿å¾ŒçºŒåœ¨ç¨‹å¼ä¸­ä½¿ç”¨ï¼Œé€™è£¡ä»‹ç´¹å…©å€‹å¸¸ç”¨çš„è§£æå™¨ï¼š</p>
<p><code>MultiPartParserï¼š</code><br>
ç”¨é€”ï¼šç”¨ä¾†è™•ç† <code>multipart/form-data</code> æ ¼å¼çš„è«‹æ±‚ï¼Œé€™ç¨®æ ¼å¼å¸¸è¦‹æ–¼è¡¨å–®ä¸­åŒ…å«æª”æ¡ˆä¸Šå‚³çš„æƒ…æ³<br>
åŠŸèƒ½ï¼šè§£æè«‹æ±‚ä¸­çš„æª”æ¡ˆèˆ‡å…¶ä»–æ¬„ä½è³‡æ–™ï¼Œå°‡æª”æ¡ˆå„²å­˜åœ¨ä¸€å€‹ç‰¹æ®Šçš„æª”æ¡ˆç‰©ä»¶ä¸­ï¼ˆé€šå¸¸æ˜¯ UploadedFileï¼‰ï¼Œè€Œå…¶ä»–è¡¨å–®è³‡æ–™å‰‡æ”¾å…¥ä¸€å€‹é¡ä¼¼å­—å…¸çš„çµæ§‹ä¸­ã€‚ä½¿ä½ èƒ½å¤ åŒæ™‚æ¥æ”¶æ–‡ä»¶å’Œæ–‡å­—è³‡æ–™ï¼Œé©ç”¨æ–¼ä¾‹å¦‚åœ–ç‰‡ä¸Šå‚³ã€é™„ä»¶ä¸Šå‚³ç­‰å ´æ™¯ã€‚</p>
<p><code>FormParserï¼š</code><br>
ç”¨ä¾†è™•ç† <code>application/x-www-form-urlencoded</code> æ ¼å¼çš„è«‹æ±‚ï¼Œé€™æ˜¯ä¸€èˆ¬ HTML è¡¨å–®æäº¤æ™‚çš„é è¨­æ ¼å¼ï¼ˆä¸åŒ…å«æª”æ¡ˆä¸Šå‚³ï¼‰ã€‚å°‡ URL ç·¨ç¢¼çš„è¡¨å–®è³‡æ–™è§£æç‚ºä¸€å€‹å­—å…¸æˆ– QueryDictã€‚åªé‡å°ç´”æ–‡å­—è¡¨å–®è³‡æ–™é€²è¡Œè§£æï¼Œä¸è™•ç†æª”æ¡ˆä¸Šå‚³ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-PY" data-lang="PY"><span style="display:flex;"><span><span style="color:#75715e"># views.py</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> rest_framework.decorators <span style="color:#f92672">import</span> api_view, permission_classes, parser_classes
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> rest_framework.parsers <span style="color:#f92672">import</span> MultiPartParser, FormParser
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> .models <span style="color:#f92672">import</span> Resume
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> .serializers <span style="color:#f92672">import</span> ResumeSerializer
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> rest_framework.response <span style="color:#f92672">import</span> Response
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> rest_framework <span style="color:#f92672">import</span> status
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.shortcuts <span style="color:#f92672">import</span> get_object_or_404
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> rest_framework.permissions <span style="color:#f92672">import</span> IsAuthenticated
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@api_view</span>([<span style="color:#e6db74">&#34;GET&#34;</span>])
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@permission_classes</span>([IsAuthenticated])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">index</span>(request):
</span></span><span style="display:flex;"><span>    resumes <span style="color:#f92672">=</span> Resume<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()
</span></span><span style="display:flex;"><span>    serializer <span style="color:#f92672">=</span> ResumeSerializer(resumes, many<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> Response(serializer<span style="color:#f92672">.</span>data)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@api_view</span>([<span style="color:#e6db74">&#34;POST&#34;</span>])
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@permission_classes</span>([IsAuthenticated])
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@parser_classes</span>([MultiPartParser, FormParser])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">new</span>(request):
</span></span><span style="display:flex;"><span>    serializer <span style="color:#f92672">=</span> ResumeSerializer(data<span style="color:#f92672">=</span>request<span style="color:#f92672">.</span>data)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> serializer<span style="color:#f92672">.</span>is_valid():
</span></span><span style="display:flex;"><span>        serializer<span style="color:#f92672">.</span>save()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Response(serializer<span style="color:#f92672">.</span>data, status<span style="color:#f92672">=</span>status<span style="color:#f92672">.</span>HTTP_201_CREATED)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> Response(serializer<span style="color:#f92672">.</span>errors, status<span style="color:#f92672">=</span>status<span style="color:#f92672">.</span>HTTP_400_BAD_REQUEST)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@api_view</span>([<span style="color:#e6db74">&#34;GET&#34;</span>])
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@permission_classes</span>([IsAuthenticated])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">show</span>(request, id):
</span></span><span style="display:flex;"><span>    resume <span style="color:#f92672">=</span> get_object_or_404(Resume, id<span style="color:#f92672">=</span>id)
</span></span><span style="display:flex;"><span>    serializer <span style="color:#f92672">=</span> ResumeSerializer(resume)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> Response(serializer<span style="color:#f92672">.</span>data)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@api_view</span>([<span style="color:#e6db74">&#34;PUT&#34;</span>, <span style="color:#e6db74">&#34;PATCH&#34;</span>])
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@permission_classes</span>([IsAuthenticated])
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@parser_classes</span>([MultiPartParser, FormParser])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">edit</span>(request, id):
</span></span><span style="display:flex;"><span>    resume <span style="color:#f92672">=</span> get_object_or_404(Resume, id<span style="color:#f92672">=</span>id)
</span></span><span style="display:flex;"><span>    partial <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span>method <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;PATCH&#34;</span>
</span></span><span style="display:flex;"><span>    serializer <span style="color:#f92672">=</span> ResumeSerializer(resume, data<span style="color:#f92672">=</span>request<span style="color:#f92672">.</span>data, partial<span style="color:#f92672">=</span>partial)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> serializer<span style="color:#f92672">.</span>is_valid():
</span></span><span style="display:flex;"><span>        serializer<span style="color:#f92672">.</span>save()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Response(serializer<span style="color:#f92672">.</span>data, status<span style="color:#f92672">=</span>status<span style="color:#f92672">.</span>HTTP_200_OK)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> Response(serializer<span style="color:#f92672">.</span>data, status<span style="color:#f92672">=</span>status<span style="color:#f92672">.</span>HTTP_400_BAD_REQUEST)
</span></span></code></pre></div><p>æ¥è‘—åœ¨å‰ç«¯æŠŠæ¨™ç±¤å¯«å¥½ï¼Œå°±å®Œæˆäº†ï¼</p><ul class="pa0">
  
  <li class="list di">
    <a
      href="/lioouzzz/sleepblog.git/tags/%E5%BE%8C%E7%AB%AF/"
      class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif"
    >å¾Œç«¯</a>
  </li>
  
  <li class="list di">
    <a
      href="/lioouzzz/sleepblog.git/tags/python/"
      class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif"
    >Python</a>
  </li>
  
  <li class="list di">
    <a
      href="/lioouzzz/sleepblog.git/tags/django/"
      class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif"
    >Django</a>
  </li>
  
  <li class="list di">
    <a
      href="/lioouzzz/sleepblog.git/tags/aws/"
      class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif"
    >AWS</a>
  </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">æ–‡ç« ç›®éŒ„</p>
      <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#aws-s3amazon-simple-storage-service">AWS S3ï¼ˆAmazon Simple Storage Serviceï¼‰</a></li>
        <li><a href="#ç‚ºä»€éº¼è¦ä½¿ç”¨-aws-s3-æœå‹™">ç‚ºä»€éº¼è¦ä½¿ç”¨ AWS S3 æœå‹™?</a></li>
        <li><a href="#iam">IAM</a></li>
        <li><a href="#aws-ç”³è«‹æ­¥é©Ÿ">AWS ç”³è«‹æ­¥é©Ÿ</a>
          <ul>
            <li><a href="#django-å¯¦ç¾-aws-åœ–ç‰‡ä¸Šå‚³">django å¯¦ç¾ aws åœ–ç‰‡ä¸Šå‚³</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</aside>

  </article>

    </main>
    
  <footer
    class="bottom-0 w-100 pa3"
    role="contentinfo"
    style="background: url('/lioouzzz/sleepblog.git/images/cover_image.png') no-repeat center/cover;"
  >
    <div class="flex justify-between">
      <a
        class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3"
        href="http://localhost:1313/lioouzzz/sleepblog.git/"
      >
        &copy;  ğŸ€ğŸ€ğŸ€
        2025 
      </a>
      <div><div class="ananke-socials"></div>
</div>
    </div>
  </footer>

  </body>
</html>

+++
date = '2025-01-27'
draft = false
title = 'Python-OOPç‰©ä»¶å°å‘è¨­è¨ˆ'
show_reading_time=true
featured_image = 'images/2000-s-computer-.png'
categories = ["Python"]
tags = ["python","å¾Œç«¯"]
toc=true
+++

### ä»€éº¼æ˜¯ç‰©ä»¶ï¼Ÿ
>ç‰©ä»¶(Object)=ç‹€æ…‹(State)+è¡Œç‚º(Behavior)

ç‹€æ…‹å°±æ˜¯ç‰©ä»¶çš„å±¬æ€§(Attribute)ï¼Œè¡Œç‚ºå°±æ˜¯ç‰©ä»¶çš„æ–¹æ³•(Method)ï¼Œä¹Ÿå°±æ˜¯ç¶“å¸¸å¯«åœ¨ç‰©ä»¶è£¡çš„å‡½æ•¸ã€‚

ç‚ºäº†è®“å¤§å®¶æ›´å®¹æ˜“ç†è§£ã€å­¸ç¿’ç¨‹å¼ï¼Œè¨±å¤šç¨‹å¼èªè¨€éƒ½æœ‰å¼•é€²ã€Œæ“¬äººåŒ–ã€æˆ–ã€Œæ“¬ç‰©åŒ–ã€çš„è¨­è¨ˆï¼Œè®“æˆ‘å€‘å¯ä»¥ç”¨ä¸€èˆ¬äººæ›´å®¹æ˜“æƒ³åƒçš„æ–¹å¼ä¾†çµ„ç¹”æˆ–ç®¡ç†ç¨‹å¼ç¢¼ï¼Œé€™å°±æ˜¯æ‰€è¬‚çš„ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆã€‚
<!--more-->

### é¡åˆ¥èˆ‡ç‰©ä»¶
é¡åˆ¥å°±åƒé›è›‹ç³•çš„çƒ¤ç›¤ï¼Œä¹Ÿå°±æ˜¯é¡åˆ¥(class)çš„æ¦‚å¿µï¼Œä¸€æ¨£å½¢ç‹€çš„æ¨¡å…·ï¼Œæ”¾ä¸€æ¨£çš„åŸæ–™ï¼Œå°±èƒ½åšå‡ºé¦™å™´å™´çš„é›è›‹ç³•ã€‚

è€Œé€éçƒ¤ç›¤åšå‡ºä¾†çš„é›è›‹ç³•ï¼Œä»¥ç‰©ä»¶å°å‘çš„å°ˆæœ‰åè©ä¾†èªªï¼Œå¯ä»¥è§£é‡‹æˆå¯¦é«”(instance)ã€‚

å®šç¾©é¡åˆ¥ï¼Œä½¿ç”¨çš„é—œéµå­—æ˜¯`class`ï¼š
```py
class Dog:
    pass
```
#### å®šç¾©ç‰©ä»¶

```py
xiangxiang=Dog()
elaine=Dog()
```
é€é`Dog()`é€™å€‹é¡åˆ¥ï¼Œå¯ä»¥ç”Ÿæˆå¾ˆå¤šç‹—ç‹—ï¼Œé›–ç„¶é€™å…©å€‹ç‰©ä»¶éƒ½æ˜¯ç”¨`Dog()`é¡åˆ¥ç”Ÿæˆçš„ï¼Œä¸éä»–å€‘æ˜¯ä¸åŒçš„ç‰©ä»¶ï¼Œæœ‰ç›¸åŒçš„è¡Œç‚ºï¼Œä½†æœ‰ä¸åŒçš„ç‹€æ…‹ã€‚

```
>>> xiang
<__main__.Dog object at 0x104c6d160>
>>> xiang
<__main__.Dog object at 0x104c6f0b0>
```
å¾Œé¢é‚£å€‹ `0x104c6d160` æˆ–æ˜¯ `0x104c6f0b0` é€™ç¨®çœ‹èµ·ä¾†åƒéš¨æ©Ÿè‹±æ–‡æ•¸å­—çµ„åˆçš„æ±è¥¿ï¼Œå®ƒä»£è¡¨é€™é¡†ç‰©ä»¶æ‰€åœ¨çš„è¨˜æ†¶é«”ä½ç½®ã€‚  

é€™å…©å€‹æ•¸å€¼ä¸ä¸€æ¨£ï¼Œè¡¨ç¤ºé€™å…©é¡†ç‰©ä»¶æ‰€åœ¨çš„è¨˜æ†¶é«”ä½ç½®æ˜¯ä¸ä¸€æ¨£çš„ï¼Œä¹Ÿå°±æ˜¯èªªï¼Œå®ƒå€‘æ˜¯å…©å€‹ä¸åŒä¸”ç¨ç«‹çš„å€‹é«”ã€‚

å¯ä»¥ç”¨`instance`ä¾†åˆ¤å®šç‰©ä»¶æ˜¯ä¸æ˜¯æŸå€‹é¡åˆ¥ç”Ÿæˆçš„ã€‚

```
>>> isinstance(xiang, Dog)
True
>>> isinstance(elaine, Dog)
True
```

ä¹Ÿå¯ä»¥ç”¨`__class__`å±¬æ€§ä¾†è§€å¯Ÿåˆ°é€™é¡†ç‰©ä»¶æ˜¯ç”±å“ªå€‹é¡åˆ¥ç”¢ç”Ÿçš„ï¼š

```py
>>> xiangxiang.__class__
<class'__main__.Dog'>
>>> xiangxiang.__class__.__name__
'Dog'
```
å†è£œå€‹` __name__ `å±¬æ€§ï¼Œå°±å¯ä»¥çœ‹åˆ°é€™å€‹é¡åˆ¥çš„åå­—ã€‚

#### åˆå§‹åŒ–å’Œå¯¦é«”å±¬æ€§
é›è›‹ç³•å¦‚æœåŠ äº†å„å¼å„æ¨£çš„é¤¡æ–™æœƒæ›´åŠ ç¾å‘³ğŸ˜‹ï¼Œæˆ‘å€‘å¯ä»¥æŠŠå¯¦é«”åŠ é»æ–™ï¼Œè®“å®ƒæ›´åŠ é®®æ˜ã€‚

```py
xiangxiang=Dog("é¦™é¦™",å’–å•¡è‰²,6)
elaine=Dog("å¥•ä¼¶",è—è‰²,24)
```

ä¸éè¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœç›´æ¥åœ¨å¯¦é«”åŠ æ–™æœƒå‡ºç¾åƒé€™æ¨£çš„éŒ¯èª¤ã€‚
```py
Traceback (most recent call last):
  File "/demo/dog.py", line 5, in <module>
    xiangxiang=Dog("é¦™é¦™",å’–å•¡è‰²,6)
            ^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Cat() takes no arguments
```

å¦‚æœå¯¦é«”è¦åŠ æ–™é‚£ä¸€å®šè¦å‘ŠçŸ¥é¡åˆ¥ï¼  
éœ€è¦åœ¨é¡åˆ¥å®šç¾©ä¸€å€‹å‡½æ•¸ï¼Œ`__init()__`

```py
class Dog:
    def __init__(self,color,age):
```
ç•¶æˆ‘å€‘é€éé¡åˆ¥å»ºç«‹å¯¦é«”æ™‚ï¼Œ**å®šç¾©åœ¨é€™å€‹é¡åˆ¥çš„`__init__( )`å‡½æ•¸å°±æœƒè‡ªå‹•è¢«å‘¼å«ä¾†é€²è¡Œåˆå§‹åŒ–çš„è¡Œç‚º**ã€‚

é€™è£¡è¦æ³¨æ„çš„æ˜¯ `__init__( )`çš„ç¬¬ä¸€å€‹åƒæ•¸ï¼Œ`self`ï¼Œé€™å€‹åƒæ•¸åç¨±ï¼ŒæŒ‡çš„å°±æ˜¯è‡ªå·±é€™é¡†å¯¦é«”æœ¬èº«ï¼Œä½ ä¹Ÿå¯ä»¥æ”¹æˆåˆ¥çš„è®Šæ•¸åç¨±ä¸è¦å«`self`ï¼Œ`self`åªæ˜¯å¤§å®¶çš„æ…£ä¾‹ã€‚

ç‚ºä»€éº¼è¦å¸¶`self`åƒæ•¸çµ¦`__init__( )`ï¼Œå› ç‚ºç•¶æˆ‘å€‘å‘¼å«`Dog( )`é¡åˆ¥ä¾†å»ºç«‹å¯¦é«”æ™‚ï¼ŒPythonæœƒé€²è¡Œä»¥ä¸‹æ­¥é©Ÿï¼š

1.å»ºç«‹ä¸€å€‹`Dog`é¡åˆ¥ä¸¦æŒ‡å®šçµ¦è®Šæ•¸`xiangxiang`ï¼Œé€™é¡†ç‰©ä»¶è£¡æ²’æœ‰ä»€éº¼å±¬æ€§  
2.ç«‹å³åŸ·è¡Œ`xiangxiang.__init__( )`ï¼Œä¸¦ä¸”æŠŠå…¶ä»–åƒæ•¸å‚³çµ¦å®ƒï¼Œç„¶å¾Œæ‰é€é`self`æŠŠé€™äº›åƒæ•¸æŒ‡å®šæˆå±¬æ€§  

Pythonä¸­çš„`__init__()`ä¸æ˜¯å»ºæ§‹å­(Constructor)ã€‚å› ç‚ºåŸ·è¡Œ`__init__()`æ–¹æ³•æ™‚ï¼Œé€™é¡†ç‰©ä»¶æ—©å°±å»ºç«‹å¥½äº†ï¼Œ`__init__()`æ˜¯åœ¨åš**åˆå§‹åŒ–**çš„å·¥ä½œã€‚  

æ‰€ä»¥åœ¨å‘¼å«`__init()__`æ™‚ï¼Œæ‰éœ€è¦`self`ç•¶ä½œç¬¬ä¸€å€‹åƒæ•¸ï¼Œ`self`æŒ‡çš„æ˜¯å‰›å‰›ç”¢ç”Ÿçš„ç‰©ä»¶ã€‚

`__new()`æ›´æ¥è¿‘å…¶ä»–ç¨‹å¼èªè¨€åœ¨åšçš„å»ºæ§‹å­çš„äº‹ã€‚

å»ºæ§‹å­çš„è³‡æ–™ï¼š
>In class-based, object-oriented programming, a constructor is a special type of function called to create an object.

åœ¨ `__init__`() å‡½æ•¸è£¡æ‡‰è©²è¦åšäº›ä»€éº¼äº‹ï¼Ÿå…¶å¯¦å®ƒå°±åªæ˜¯å€‹å‡½æ•¸ï¼Œæ‰€ä»¥ä½ æƒ³åšä»€éº¼éƒ½è¡Œï¼Œä¸éæ¯”è¼ƒå¸¸è¦‹çš„å°±æ˜¯æŠŠå¸¶é€²ä¾†çš„åƒæ•¸æŒ‡å®šæˆç‰©ä»¶çš„å±¬æ€§ï¼š  

```py
class Dog:
    def __init__(self, name, color, age):
        self.name = name
        self.color = color
        self.age = age
```

æ‰€ä»¥ `self.name` æˆ–æ˜¯ `self.age` é€™æ¨£çš„å¯«æ³•å°±æ˜¯åœ¨è¨­å®šé€™é¡†ç‰©ä»¶çš„å±¬æ€§ã€‚é€™æ¨£æˆ‘å€‘å°±å¯ä»¥é€éé€™äº›å±¬æ€§ä¾†å€åˆ†é€™å…©éš»ç‹—å‹¾ï¼š

```py
xiangxiang=Dog("é¦™é¦™",å’–å•¡è‰²,6)
elaine=Dog("å¥•ä¼¶",è—è‰²,24)

print(xiangxiang.name) #è¼¸å‡º é¦™é¦™
print(elaine.color) #è¼¸å‡º è—è‰²
```

é™¤äº†ç”¨`.`çš„æ–¹å¼å¤–ï¼Œä¹Ÿå¯ä»¥é€éç‰©ä»¶èº«ä¸Šçš„`__dict__`å±¬æ€§ä¾†æª¢è¦–é€™é¡†ç‰©ä»¶èº«ä¸Šçš„å±¬æ€§ï¼š

```
>>> xiangxinag.__dict__
{'name': 'é¦™é¦™', 'color': 'å’–å•¡è‰²', 'age': 6}
>>> elaine.__dict__
{'name': 'å¥•ä¼¶', 'color': 'è—è‰²', 'age': 24}
```

ä¸åŒå¯¦é«”ä¹‹é–“çš„å±¬æ€§ã€ç‹€æ…‹ï¼Œéƒ½æ˜¯**ç¨ç«‹ä¸å—å½¼æ­¤å½±éŸ¿çš„**ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹é€™äº›å±¬æ€§ï¼Œå¯ä»¥é€é`.`ä¾†ä¿®æ”¹ï¼š
```python
xiangxiang=Dog("é¦™é¦™","å’–å•¡è‰²",6)
print(xiangxiang.clor) #å°å‡ºå’–å•¡è‰²

xiangxiang.color="ç™½è‰²"
print(xiangxiang.color) #å°å‡ºç™½è‰²
```
å› ç‚ºé€™äº›å±¬æ€§å°±åƒæ˜¯é€™é¡†å¯¦é«”è£¡é¢çš„è®Šæ•¸ï¼Œæˆ‘å€‘ä¹Ÿæœƒç¨±é€™äº›å±¬æ€§ç‚ºã€Œå¯¦é«”è®Šæ•¸ï¼ˆInstance Variableï¼‰ã€ã€‚


#### å¯¦é«”æ–¹æ³•
é™¤äº†å±¬æ€§ä¹‹å¤–ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥åœ¨é¡åˆ¥è£¡é¢å®šç¾©å‡½æ•¸ï¼Œåœ¨å‘¼å«å‡½æ•¸æ™‚ï¼Œæœƒç¨±å«ä»–å€‘
ã€Œæ–¹æ³•ï¼ˆMethodï¼‰ã€ï¼Œåœ¨é¡åˆ¥è£¡å®šç¾©æ–¹æ³•å’Œå®šç¾©å‡½æ•¸æ²’ä»€éº¼ä¸åŒï¼Œéƒ½æ˜¯ä½¿ç”¨`def`é—œéµå­—  

åœ¨å‡½æ•¸ç« ç¯€å­¸åˆ°çš„(åƒæ•¸é è¨­å€¼ã€ä½ç½®å¼•è¿°ã€é—œéµå­—å¼•æ•¸......)ï¼Œåœ¨é€™è£¡ä¹Ÿå¯ä»¥ç”¨  

é¡åˆ¥æ¯”è¼ƒç‰¹åˆ¥çš„æ˜¯ï¼Œåœ¨å®šç¾©æ–¹æ³•çš„æ™‚å€™ï¼Œç¬¬ä¸€å€‹åƒæ•¸æ˜¯è‡ªå·±é€™é¡†ç‰©ä»¶ï¼Œä¹Ÿå°±æ˜¯`self`ï¼Œé€™æ¨£æ‰å¯ä»¥é€é`self`è®Šæ•¸ä¾†å­˜å–è‡ªå·±é€™é¡†ç‰©ä»¶èº«ä¸Šçš„å…¶ä»–å±¬æ€§æˆ–æ–¹æ³•ã€‚  

```py
class Dog:
    def __init__(self,name,color,age):
        self.name=name
        self.color=color
        self.age=age
    def speak(self,sound="æ±ªæ±ª"):
        print(f"æˆ‘æ˜¯{self.name},{sound}")
```

åœ¨å®šç¾©`speak()`å‡½æ•¸çš„æ™‚å€™ï¼Œä¸éæœ‰æ²’æœ‰ç”¨åˆ°`self`åƒæ•¸ï¼Œåœ¨åŸ·è¡Œé€™å€‹å‡½æ•¸çš„æ™‚å€™éƒ½æœƒè‡ªå‹•å¹«æˆ‘å€‘æŠŠè‡ªå·±é€™é¡†ç‰©ä»¶å‚³é€²å»ç•¶ç¬¬ä¸€å€‹åƒæ•¸ï¼Œæ‰€ä»¥åœ¨å®šç¾©å‡½æ•¸çš„æ™‚å€™åƒæ•¸é‚„æ˜¯ä¸èƒ½å°‘ã€‚

```py
xiangxiang=Dog("é¦™é¦™","å’–å•¡è‰²",6)
xiangxiang.speak() #æˆ‘æ˜¯é¦™é¦™,æ±ªæ±ª
xiangxiang.speak("å“ˆå“ˆå“ˆ") #æˆ‘æ˜¯é¦™é¦™,å“ˆå“ˆå“ˆ
```

ç•¶Pythonçœ‹åˆ°æˆ‘å€‘åŸ·è¡Œ`xiangxiang.speak()`æ–¹æ³•çš„æ™‚å€™ï¼Œå®ƒæœƒè‡ªå‹•æŠŠ`xiangxiang`é€™é¡†ç‰©ä»¶å‚³çµ¦`speak()`å‡½æ•¸ç•¶ä½œç¬¬ä¸€å€‹åƒæ•¸ï¼Œä¹Ÿå°±æ˜¯`self`
ï¼Œæ‰€ä»¥ä¸è¦å¿˜è¨˜åœ¨å®šç¾©å¯¦é«”æ–¹æ³•çš„æ™‚å€™æŠŠ`self`åƒæ•¸åŠ ä¸Šå»

åªè¦æ˜¯`Dog`é¡åˆ¥æ‰€ç”¢ç”Ÿçš„å¯¦é«”ï¼Œå°±èƒ½å¤ ä½¿ç”¨é€™å€‹é¡åˆ¥çš„æ–¹æ³•ä»¥åŠå­˜å–è£¡é¢çš„å±¬æ€§ï¼Œé€éé€™æ¨£çš„è¨­è¨ˆï¼Œæˆ‘å€‘å¯ä»¥æŠŠç›¸é—œçš„è³‡æ–™å’Œæ“ä½œéƒ½æ”¾åœ¨åŒä¸€å€‹é¡åˆ¥è£¡ï¼Œè®“ç¨‹å¼ç¢¼æ›´æœ‰çµ„ç¹”æ€§ï¼Œä¹Ÿæ›´å®¹æ˜“ç¶­è­·ã€‚  

#### é¡åˆ¥å±¬æ€§
åœ¨ Python è¦åœ¨é¡åˆ¥è£¡å®šç¾©å±¬æ€§ï¼Œå°±ç›´æ¥å¯«åœ¨é¡åˆ¥è£¡å°±å¥½ï¼Œåƒé€™æ¨£ï¼š

```py
class Dog:
    count=0
    actions=[]
```
é€™äº›å±¬æ€§æ˜¯å®šç¾©åœ¨é¡åˆ¥æœ¬èº«ï¼Œæ•…ç¨±ç‚ºã€Œé¡åˆ¥å±¬æ€§ï¼ˆClass Attributeï¼‰ã€ã€‚
é¡åˆ¥å±¬æ€§å’Œå¯¦é«”å±¬æ€§ä¸åŒï¼Œé¡åˆ¥å±¬æ€§æ˜¯å±¬æ–¼é¡åˆ¥æœ¬èº«çš„ï¼Œè€Œä¸å±¬æ–¼é¡åˆ¥æ‰€ç”¢ç”Ÿå‡ºä¾†çš„å¯¦é«”(xiangxiangã€elaine)ã€‚

å¦‚æœæˆ‘å€‘æƒ³è¦å­˜å–é¡åˆ¥å±¬æ€§ï¼Œç›´æ¥é€éé¡åˆ¥å°±è¡Œäº†ï¼š
```PY
>>> Dog.count
0
>>> Dog.actions
[]
```
é¡åˆ¥å±¬æ€§ä¹Ÿå¯ä»¥é€é`__dict__`é€™å€‹å±¬æ€§ä¾†çœ‹é¡åˆ¥çš„å±¬æ€§ï¼š

```py
>>> Dog.__dict__
mappingproxy({'__module__': '__main__', 'count': 0, 'actions': [], '...ç•¥...'})
```
çœ‹èµ·ä¾†çš„æ±è¥¿ç¨å¾®æ¯”å¯¦é«”çš„å±¬æ€§å¤šäº†ä¸€äº›ï¼Œä½†æ‡‰è©²é‚„æ˜¯å¯ä»¥çœ‹åˆ°å‰›æ‰å®šç¾©çš„ `count` è·Ÿ `actions` å±¬æ€§ï¼Œé€™äº›å±¬æ€§æ˜¯å­˜æ”¾åœ¨é¡åˆ¥è£¡çš„ã€‚

å¦‚æœæƒ³è¦åœ¨å¯¦é«”æ–¹æ³•è£¡é¢å–ç”¨é¡åˆ¥è®Šæ•¸ï¼Œå¯ä»¥é€£åå¸¶å§“çš„æŠŠé¡åˆ¥åç¨±å¯«ä¸Šå»ï¼š

```py
class Dog:
    count = 0
    actions = []

    def __init__(self, name, color, age):
        self.name = name
        self.color = color
        self.age = age
        Dog.count += 1   # <-- åœ¨é€™è£¡
```

åœ¨ä¸Šé¢é€™å€‹ä¾‹å­ä¸­ï¼Œå› ç‚ºæ˜¯å¯«åœ¨ `__init__()`æ–¹æ³•è£¡ï¼Œæ•ˆæœå°±è®Šæˆæ¯æ¬¡å»ºç«‹æ–°çš„å¯¦é«”çš„æ™‚å€™ï¼Œcount å±¬æ€§çš„å€¼å°±æœƒåŠ ä¸€ï¼š
```py
>>> Dog.count
0
>>> xiangxiang = Dog("é¦™é¦™", "å’–å•¡è‰²", 6)
>>> Dog.count
1
>>> elaine = Cat("å¥•ä¼¶", "è—è‰²", 24)
>>> Dog.count
2
```
å›é ­çœ‹ä¸€ä¸‹`xiangxiang`å¯¦é«”ï¼Œå¦‚æœæˆ‘å€‘è©¦è‘—å°å‡º`xiangxiang.count`æœƒç™¼ç”Ÿä»€éº¼äº‹ï¼Ÿï¼Œè¦æ³¨æ„ï¼Œé€™è£¡æ˜¯é€éå¯¦é«”å­˜å–å±¬æ€§ï¼Œä¸æ˜¯é¡åˆ¥

```
>>> xiangxiang = Dog("é¦™é¦™", "å’–å•¡è‰²", 6)
>>> elaine = Cat("å¥•ä¼¶", "è—è‰²", 24)
>>> xiangxiang.count
2
```
é›–ç„¶é€™å€‹`count`æ˜¯é¡åˆ¥å±¬æ€§ï¼Œå¯æ˜¯ç«Ÿç„¶å¯ä»¥é€éå¯¦é«”å–å¾—ï¼Ÿ
é€™æ˜¯å› ç‚ºPythonåœ¨æ‰¾æ±è¥¿çš„æ™‚å€™ï¼Œæœƒå…ˆå¾å¯¦é«”è‡ªå·±æœ¬èº«çœ‹çœ‹æœ‰æ²’æœ‰ï¼Œå¦‚æœæ‰¾åˆ°å°±æ²’äº‹ï¼Œæ‰¾ä¸åˆ°å°±æœƒæ‰¾é¡åˆ¥ã€‚  

æ‰€ä»¥ç•¶æˆ‘å€‘å°å‡º`xiangxiang.count`æ™‚ï¼ŒPythonåœ¨`xiangxiang`é€™å€‹å¯¦é«”ç¢ºå¯¦æ‰¾ä¸åˆ°ï¼Œæ‰€ä»¥æ¥è‘—æœƒåˆ°ä»–æ‰€å±¬çš„é¡åˆ¥`Dog`è£¡é¢æ‰¾ï¼Œç„¶å¾Œå°±æ‰¾åˆ°äº†ã€‚  

æ¥ä¸‹ä¾†ï¼Œæˆ‘æƒ³è¦åœ¨ `xiangxiang` é€™é¡†ç‰©ä»¶èº«ä¸Šæ–°å¢ä¸€å€‹ `count` å±¬æ€§çš„è©±ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼š

```
>>> xiangxiang.count = 2000
>>> xiangxiang.__dict__
{'name': 'å‡±è’‚', 'color': 'ç™½è‰²', 'age': 18, 'xiangxiang': 2000}
```
é€™æ™‚æœƒç™¼ç¾åŸæœ¬çš„ `__dict__ `è£¡å¤šäº†ä¸€å€‹ `count` å±¬æ€§ã€‚

```
xiangxiang.count
2000
```
å°å‡ºä¾†çš„å€¼æ˜¯2000ï¼Œè€Œä¸æ˜¯åŸæœ¬çš„1ï¼Œå› ç‚ºPythonæœƒåœ¨`xiangxiang`ç‰©ä»¶çœ‹æœ‰æ²’æœ‰`count`å±¬æ€§ï¼Œæœ‰æ‰¾åˆ°ï¼Œæ‰€ä»¥å°å‡º2000

æ¥è‘—æˆ‘å†æ–°å¢å¦ä¸€å€‹ `elaine` ç‰©ä»¶ä¾†åšäº›å¯¦é©—ï¼š

```
>>> elaine=Dog("å¥•ä¼¶","è—è‰²",24)
>>> elaine.__dict__
{"name":"å¥•ä¼¶","color":"è—è‰²","age":20}
>>> elaine.count
2
```
é€™å€‹`elaine`ç‰©ä»¶èº«ä¸Š`count`å±¬æ€§ï¼Œæ‰€ä»¥æ ¹æ“šè¦å‰‡`elaine.count`æœƒå¾—åˆ°2ï¼Œå¦‚æœæˆ‘å€‘ç›´æ¥å°å‡º `Dog.count` é€™å€‹é¡åˆ¥è®Šæ•¸çš„è©±ï¼š

```py
>>> Dog.count
2
```

#### å±¬æ€§è£é£¾å™¨
å¦‚æœæƒ³è¦é™åˆ¶é€™å€‹å±¬æ€§çš„å­˜å–ï¼Œåœ¨å…¶ä»–çš„ç¨‹å¼èªè¨€æœ‰äº›æœƒç”¨`getter`è·Ÿ`setter`çš„è¨­è¨ˆä¾†é™åˆ¶å±¬æ€§çš„å­˜å–ï¼Œåƒé€™æ¨£ï¼š
```py
class Hero:
    def __init__(self,title,name,age):
        self.title=title
        self.name=name
        self._age=age

    def get_age(self):
        return self._age
    
    def set_age(self,age):
        if age<=0 or age>120:
            raise ValueError("å¹´é½¡è¨­å®šéŒ¯èª¤")
        self._age=age
```
åœ¨é€™è£¡ï¼Œåˆ»æ„æŠŠåŸæœ¬çš„ `self.age` å‰é¢åŠ ä¸Šä¸€å€‹åº•ç·š `_` è®Šæˆ `self._age`ï¼Œç„¶å¾Œå¦å¤–å¯«äº† `.get_age()` ä»¥åŠ `.set_age()` é€™å…©å€‹æ–¹æ³•ä¾†è®€å–æˆ–è¨­å®š `self._age` çš„å€¼ï¼ŒåŒæ™‚åœ¨ `.set_age()` è£¡é¢åŠ ä¸Šç°¡å–®çš„åˆ¤æ–·ï¼Œå¦‚æœè¨­å®šçš„å¹´é½¡ä¸åœ¨é©ç•¶ç¯„åœå…§å°±æœƒä¸Ÿå‡ºéŒ¯èª¤è¨Šæ¯ï¼š
```
>>> himmel.get_age()
18

# æ­£å¸¸æ“ä½œ
>>> himmel.set_age(30)
>>> himmel.get_age()
30

# ä¸æ­£å¸¸æ“ä½œ
>>> himmel.set_age(1000)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/private/tmp/tt.py", line 12, in set_age
    raise ValueError("å¹´é½¡è¨­å®šéŒ¯èª¤")
ValueError: å¹´é½¡è¨­å®šéŒ¯èª¤
```

é›–ç„¶é€™æ¨£å¯«å¯ä»¥æ§åˆ¶å±¬æ€§å­˜å–ï¼Œä½†é€™ç¨®å¯«æ³•é‚„è¦åŠ ä¸Šå°æ‹¬è™Ÿå‘¼å«ï¼Œé€™å¯«æ³•æœ‰é»å›‰å—¦ï¼Œç”¨èµ·ä¾†ä¸åƒå±¬æ€§ï¼ŒPythonæä¾›äº†ä¸€å€‹åç‚º`property`çš„å‡½æ•¸è£é£¾å™¨å¯ä»¥åšåˆ°é¡ä¼¼å±¬æ€§çš„æ•ˆæœ

```py
class Hero:
    def __init__(self,title,name,age):
        self.title=title
        self.name=name
        self._age=age
    
    @property   # <-- æ›åœ¨é€™è£¡æœƒå¾—åˆ° getter
    def age(self):
        return self._age
    @age.setter # <-- é€™æ˜¯ setter
    def age(self,age):
        if age<=0 or age>120
            raise ValueError("å¹´é½¡è¨­å®šéŒ¯èª¤")
        self._age = age
```
é€™è£¡çš„`property`æ˜¯ä¸€å€‹å…§å»ºé¡åˆ¥ã€‚age() å‡½æ•¸æœ¬èº«çš„å…§å®¹æ²’è®Šï¼Œåªæ˜¯åœ¨å®šç¾©çš„æ™‚å€™å¤šæ›ä¸Šäº† `property` è·Ÿ `age.setter` é€™å…©å€‹è£é£¾å™¨ï¼Œé€™æ¨£åœ¨å­˜å–` age`å±¬æ€§çš„æ™‚å€™ï¼Œä¸éœ€è¦åŠ ä¸Šå°æ‹¬è™Ÿå°±èƒ½ä½¿ç”¨ï¼š

```
>>> himmel.age
18
>>> himmel.age = 38
>>> himmel.age
38
>>> himmel.age = 1000
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/private/tmp/tt.py", line 14, in age
    raise ValueError("å¹´é½¡è¨­å®šéŒ¯èª¤")
ValueError: å¹´é½¡è¨­å®šéŒ¯èª¤
```
#### ç§æœ‰å±¬æ€§ï¼Ÿ
ä¸ç®¡æ˜¯`getter`æˆ–æ˜¯`setter`é‚„æ˜¯æ›ä¸Š`property`å‡½æ•¸è£é£¾å™¨éƒ½ä¸€æ¨£ï¼ŒPythonä¸¦æ²’æœ‰çœŸæ­£çš„ç§æœ‰è®Šæ•¸æˆ–å±¬æ€§çš„è¨­è¨ˆï¼ŒåŠ åº•ç·šåªæ˜¯ä¸€å€‹æ…£ä¾‹ï¼Œè®“é–‹ç™¼è€…çŸ¥é“é€™å€‹å±¬æ€§ä¸å»ºè­°å­˜å–ã€‚å¦‚æœç¡¬è¦ç„¡è¦–æ…£ä¾‹ï¼Œç¡¬è¦æ‹¿ä¾†ç”¨ä¹Ÿæ˜¯å¯ä»¥ã€‚

```
>>> himmel._age
18
>>> himmel._age = 1000
>>> himmel._age
1000
```

å¦‚æœæ”¹æˆ`__age`ï¼Œå…©å€‹åº•ç·šã€‚
```py
class Hero:
    def __init__(self, title, name, age):
        self.title = title
        self.name = name
        self.__age = age  # é€™è£¡æ”¹æˆå…©å€‹åº•ç·šçš„ __age

himmel = Hero("å‹‡è€…", "æ¬£æ¢…çˆ¾", 18)
```
å¥½åƒçœŸçš„æ‹¿ä¸åˆ°ï¼Ÿ
```
>>> himmel.__age
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'Hero' object has no attribute '__age'
```

ä¸éå¦‚æœç¿»ä¸€ä¸‹å®ƒçš„`__dict__`å±¬æ€§ï¼Œå°±æœƒçŸ¥é“`__age`è®Šæˆ`_Hero_age`(_é¡åˆ¥åç¨±__å±¬æ€§åå­—)ï¼Œé€™æ˜¯Pythonçš„åå­—æ”¹ç·¨(Name Mangling)çš„ç‰¹æ®Šè¨­è¨ˆï¼Œå¦‚æ­¤ä¸€ä¾†å°±å¯ä»¥ä¿®æ”¹ã€‚

```
>>> himmel._Hero__age
18
>>> himmel._Hero__age = 1000
>>> himmel._Hero__age
1000
```

#### é™å®šå±¬æ€§
Pythonçš„é¡åˆ¥æœ‰å€‹ç‰¹åˆ¥çš„å±¬æ€§å«åš`__slots__`ï¼Œé€™å€‹å±¬æ€§å¯ä»¥é™åˆ¶ç‰©ä»¶çš„å±¬æ€§åªæœ‰è¨­å®šåœ¨`__slots__`åå–®è£¡çš„æ‰å¯ä»¥ï¼Œå¦‚æœæ–°å¢ç‰©ä»¶ä»¥å¤–çš„å±¬æ€§ï¼ŒPythonæœƒæ‹‹å‡º`AttributeError`çš„ä¾‹å¤–

åƒä»¥ä¸‹çš„ç¨‹å¼ç¢¼ï¼Œçµ¦é¡åˆ¥è¨­å®šï¼Œå°±å¯ä»¥é™åˆ¶é¡åˆ¥çš„ç‰©ä»¶åªèƒ½æœ‰`name`å’Œ`age`é€™å…©å€‹å±¬æ€§ã€‚
```py
class Dog:
    __slots__ = ('name', 'age')
```

é€™å€‹`__slot__`å±¬æ€§å¯ä»¥è¿­ä»£ç‰©ä»¶ï¼Œå¯ä»¥å®šç¾©æˆä¸²åˆ—ã€å…ƒçµ„ã€é›†åˆï¼Œåªè¦å¯è¿­ä»£ç‰©ä»¶è£¡çš„å…ƒç´ æ˜¯å­—ä¸²å°±å¯ä»¥äº†ï¼Œåœ¨é€™è£¡æ˜¯æ³›ï¼Œåœ¨é€™è£¡ç¤ºç¯„ç”¨å…ƒçµ„(Tuple)ã€‚

`__slots__`é™¤äº†é™å®šå±¬æ€§ä¹‹å¤–ï¼Œå®ƒé‚„æœ‰æ‹”é™¤`__dict__`å±¬æ€§çš„åŠŸèƒ½ï¼š
```
>>> kitty.__dict__
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'Cat' object has no attribute '__dict__'. Did you mean: '__dir__'?
```

å› ç‚º`__slots__`ä¸€é–‹å§‹æœƒå…ˆå®šç¾©å¥½ç‰©ä»¶èº«ä¸Šæœ‰å“ªäº›å±¬æ€§ï¼Œæ‰€ä»¥Pythonåœ¨å»ºç«‹ç‰©ä»¶æ™‚å°±æœƒé ç•™å›ºå®šçš„ç©ºé–“ä¾†å„²å­˜é€™äº›å±¬æ€§ã€‚

ä¸é`__slots__`é‡ä¸Šé¡åˆ¥ç¹¼æ‰¿çš„æ•ˆæœå¯èƒ½æœƒä¸å¤ªä¸€æ¨£ï¼š
```py
class Animal:
    __slots__ = ('name', 'age')

    def __init__(self, name, age):
        self.name = name
        self.age = age

class Dog(Animal):
    pass
```

```
>>> kitty = Dog("Kitty", 18)
>>> kitty
<__main__.Dog object>
>>> kitty.name
'Kitty'
>>> kitty.hey = "Hey"
>>> kitty.__dict__
{'hey': 'Hey'}
```
ç‚ºä»€éº¼é€™å€‹`kitty`ä»æœ‰`__dict__`å±¬æ€§ï¼Ÿé€™æ˜¯å› ç‚º`Dog`é¡åˆ¥æœ¬èº«ä¸¦æ²’æœ‰è¨­å®š`__slots__`å±¬æ€§ï¼Œæ‰€ä»¥ç”¨å®ƒä¾†å»ºç«‹ç‰©ä»¶çš„æ™‚å€™ï¼Œé‚„æ˜¯æœƒç•™æœ‰` __dict__` å±¬æ€§ã€‚

å¦‚æœæ›æˆ`Dog`é¡åˆ¥åŠ ä¸Š`__slots__`
```py
class Animal:
    pass

class Dog(Animal):
    __slots__ = ('name', 'age')
```

```
>>> kitty = Dog()
>>> kitty.__dict__
{}
```
é€™è£¡çš„`kitty`å¯¦é«”ç‚ºä»€éº¼é‚„æ˜¯æœ‰`__dict__` ?

ä»¥ä¸‹æ˜¯è©³ç´°èªªæ˜ï¼š
å› ç‚º`Animal`æ²’æœ‰å®šç¾©`__slot__`ï¼Œæ‰€ä»¥Pythonæœƒç‚º`Animal`(ä»¥åŠå­é¡åˆ¥çš„æ¯å€‹å¯¦ä¾‹)éƒ½å»ºç«‹ä¸€å€‹`__dict__`ä¾†å„²å­˜å±¬æ€§ã€‚

`Dog`å®šç¾©äº†`__slots__ = ('name', 'age')`ï¼Œåªé™å®š`name`å’Œ`age`é€™å…©å€‹å±¬æ€§ï¼Œä¸¦ä¸”åœ¨`Dog`ä¸æœƒæœ‰`__dict__`ä¾†å„²å­˜å±¬æ€§ã€‚

`Dog`ç¹¼æ‰¿æ–¼`Animal`ï¼Œè€Œ`Animal`ä¸¦æ²’æœ‰ä½¿ç”¨`__slots_`ï¼Œå› æ­¤`Animal`çš„`dict`ä»ç„¶å­˜åœ¨ï¼Œæœƒè¢«`Dog`å¯¦ä¾‹(kitty)æ‰€ç¹¼æ‰¿ã€‚

å¦‚ä½•é¿å…ç¹¼æ‰¿ `__dict__`

```py
class Animal:
    __slots__ = ()  # å®šç¾©ä¸€å€‹ç©ºçš„ __slots__

class Dog(Animal):
    __slots__ = ('name', 'age')

kitty = Dog()

```

é‚„æ˜¯æœ‰æ–¹æ³•å¯ä»¥åŠ å›ä¾†`__slots__`
```py
class Cat:
    __slots__ = ('name', 'age', '__dict__')
    
```

å°çµï¼šä½¿ç”¨ `__slots__` çš„ç¢ºå¯ä»¥è®“å±¬æ€§çš„å­˜å–é€Ÿåº¦æ›´å¿«ä¸€é»é»ï¼Œè€Œä¸”ä¹Ÿæ¯”è¼ƒç¯€çœè¨˜æ†¶é«”ï¼Œä¸éé‡åˆ°ç¹¼æ‰¿çš„æ™‚å€™å°±è¦ç¨å¾®æ³¨æ„ï¼Œä¸€ä¸å°å¿ƒå¯èƒ½å°±æœƒå‡ºç¾è·Ÿé æœŸä¸å¤ªä¸€æ¨£çš„çµæœã€‚

### é¡åˆ¥æ–¹æ³•èˆ‡éœæ…‹æ–¹æ³•

```py
class Duck:
    def all():
        print("é´¨é´¨å€‘ï¼Œé›†åˆäº†")

Duck.all()
```

`Duck.all()`é€™ä¸æ˜¯é¡åˆ¥æ–¹æ³•(Class Method)ï¼Œåªæ˜¯å‰›å¥½å®šç¾©åœ¨é¡åˆ¥è£¡çš„å‡½æ•¸è€Œå·²ï¼Œè·Ÿé¡åˆ¥æ²’æœ‰ä»€éº¼é—œä¿‚

å†å›é ­çœ‹çœ‹å¯¦é«”æ–¹æ³•ï¼Œæ‰€è¬‚çš„å¯¦é«”æ–¹æ³•ï¼Œå°±æ˜¯ç¶å®šåœ¨ã€Œå¯¦é«”ã€çš„æ–¹æ³•ï¼Œåœ¨åŸ·è¡Œæ™‚PythonæœƒæŠŠé€™å€‹å¯¦é«”å‚³çµ¦é€™å€‹æ–¹æ³•ä½œç‚ºç¬¬ä¸€å€‹åƒæ•¸ï¼ŒåŒæ¨£çš„æ¦‚å¿µï¼Œé¡åˆ¥æ–¹æ³•(class Method)å°±æ˜¯ç¶å®šåœ¨ã€Œé¡åˆ¥ã€çš„æ–¹æ³•ï¼Œåœ¨åŸ·è¡Œæ™‚æœƒæŠŠé¡åˆ¥å‚³çµ¦é€™å€‹æ–¹æ³•ç•¶ä½œç¬¬ä¸€å€‹åƒæ•¸ã€‚

å®šç¾©é¡åˆ¥æ–¹æ³•ï¼Œé€šå¸¸æœƒç”¨å…§å»ºçš„å‡½æ•¸è£é£¾å™¨ `classmethod`ï¼š

```py
class Duck:
    def all():
        print("é´¨å­å€‘ï¼Œé›†åˆäº†!")

    @classmethod
    def list(cls):
        print(f"{cls.name}å€‘ï¼Œé›†åˆå›‰!")
```

åœ¨ `list()` å‡½æ•¸è£¡çš„ `cls` è·Ÿ `self` æ˜¯å·®ä¸å¤šçš„æ¦‚å¿µï¼Œé€™ä¸æ˜¯ä»€éº¼ç‰¹æ®Šçš„è®Šæ•¸ï¼Œå°±åªæ˜¯å› ç‚ºå‚³é€²ä¾†çš„æ˜¯ä¸€å€‹é¡åˆ¥ï¼Œæ‰€ä»¥æ…£ä¾‹ä¸ŠæœƒæŠŠåƒæ•¸å‘½åç‚º `cls`ï¼Œæ²’è¾¦æ³•ï¼Œèª°å« `class` åœ¨ Python æ˜¯å€‹é—œéµå­—ä¸èƒ½æ‹¿ä¾†ç”¨æ‰€ä»¥åªå¥½å¦¥å”ç”¨ `cls`ã€‚

å¯ä»¥å…ˆä¾†çœ‹çœ‹é€™å€‹`list()`é•·ä»€éº¼æ¨£å­ï¼š
```
>>> Duck.all
<function Duck.all>
>>> type(Duck.all)
<class 'function'>

>>> Duck.list
<bound method Duck.list of <class '__main__.Duck'>>
>>> type(Duck.list)
<class 'method'>
```
åœ¨é€™è£¡çš„`Duck.list`æ˜¯å€‹æ–¹æ³•ç‰©ä»¶ï¼Œå‰é¢ä¹Ÿæœ‰å€‹`bound`å­—æ¨£ï¼Œè¡¨ç¤ºé€™å€‹`.list()`æ–¹æ³•æ˜¯ç¶å®šåœ¨`Duck`é¡åˆ¥ä¸Šï¼Œç›¸å°çš„`Duck.all`å°±åªæ˜¯ä¸€èˆ¬çš„å‡½æ•¸ã€‚

é›–ç„¶èªªæ˜¯ã€Œé¡åˆ¥ã€æ–¹æ³•ï¼Œä½†å¯¦é«”ä¹Ÿå¯ä»¥ç”¨ï¼š

```
>>> donald = Duck()
>>> donald.list
<bound method Duck.list of <class '__main__.Duck'>>
>>> donald.list()
Duckå€‘ï¼Œé›†åˆå›‰ï¼
```
ç•¶ `donald` å¯¦é«”è¦æ‰¾ `.list() `æ–¹æ³•çš„æ™‚å€™ï¼Œå®ƒæœƒå…ˆæ‰¾è‡ªå·±èº«ä¸Šçš„æœ‰æ²’æœ‰ï¼Œæ²’æœ‰çš„è©±å°±æœƒå»æ‰¾å®ƒçš„æ‰€å±¬é¡åˆ¥ï¼Œä¸éé€™å€‹åŸ·è¡Œçš„çµæœè·Ÿå¯¦é«”æœ¬èº«æ²’é—œä¿‚ï¼Œå› ç‚ºé€™å€‹ `.list()` é¡åˆ¥æ–¹æ³•ç¶å®šçš„æ˜¯é¡åˆ¥ï¼Œæ‰€ä»¥åŸ·è¡Œ `donald.list()` è·ŸåŸ·è¡Œ `Duck.list()` çš„çµæœæ˜¯ä¸€æ¨£çš„ã€‚

å¦ä¸€å€‹çœ‹èµ·ä¾†ä¹Ÿæ˜¯å¾ˆåƒçš„åšæ³•åšå«ã€Œéœæ…‹æ–¹æ³•ï¼ˆStatic Methodï¼‰ã€ï¼ŒåŒæ¨£ä¹Ÿæ˜¯é€éå…§å»ºçš„å‡½æ•¸è£é£¾å™¨ `staticmethod` ä¾†è£é£¾æ–¹æ³•ï¼š

```py
class Duck:
    @staticmethod
    def make_sound(sound="å‘±å‘±å‘±"):
        print(sound)
```

æ‰€è¬‚çš„éœæ…‹æ–¹æ³•ï¼Œå°±æ˜¯è·Ÿé¡åˆ¥æˆ–å¯¦é«”æ²’æœ‰é—œä¿‚çš„æ–¹æ³•ï¼Œä¹Ÿä¸éœ€è¦æ¥æ”¶ä»»ä½•éš±è—çš„åƒæ•¸ï¼Œä¹Ÿå°±æ˜¯ä¸ç”¨åƒå¯¦é«”æ–¹æ³•æˆ–é¡åˆ¥æ–¹æ³•ä¸€æ¨£åœ¨ç¬¬ä¸€å€‹åƒæ•¸æŠŠè‡ªå·±å‚³é€²ä¾†ã€‚

```
>>> Duck.make_sound
<function Duck.make_sound>
>>> type(Duck.make_sound)
<class 'function'>

>>> Duck.make_sound()
å‘±å‘±å‘±
```
å®ƒçœ‹èµ·ä¾†å°±åƒä¸€èˆ¬çš„å‡½æ•¸ï¼Œä¸éé€™å€‹å‡½æ•¸æ˜¯å¯«åœ¨`Duck`é¡åˆ¥ï¼Œå¯ä»¥é€é`Duck`é¡åˆ¥å‘¼å«å®ƒï¼Œé€é`staticmethod`è£é£¾å™¨çš„`.make_sound()`ï¼Œä¸éœ€è¦æ¥æ”¶åƒ`self`(å¯¦ä¾‹æ–¹æ³•)æˆ–`cls`(é¡æ–¹æ³•)é€™æ¨£çš„éš±å¼åƒæ•¸ã€‚  

ä¸»è¦ç”¨é€”æ˜¯ç•¶ä¸€å€‹æ–¹æ³•çš„åŠŸèƒ½è·Ÿé¡åˆ¥æœ‰é—œï¼Œä½†åˆä¸éœ€è¦å­˜å–æˆ–ä¿®æ”¹é¡åˆ¥æˆ–å¯¦ä¾‹çš„å±¬æ€§æ™‚ï¼ŒæŠŠé€™å€‹æ–¹æ³•å°è£åœ¨é¡åˆ¥å…§ã€‚

ä»¥ä¸‹çš„ä¾‹å­(é¡åˆ¥æ–¹æ³•ã€éœæ…‹æ–¹æ³•ã€ä¸€èˆ¬æ–¹æ³•)ï¼Œä¾†çœ‹çœ‹åˆ†åˆ¥æœ‰ä»€éº¼å·®åˆ¥ï¼š
```py
class Duck:
    def all():
        print("é´¨é´¨å€‘ï¼Œé›†åˆå›‰ï¼")

    @classmethod
    def walk(cls):
        print(f"{cls}æœƒèµ°è·¯")

    @staticmethod
    def make_sound(sound="å‘±å‘±å‘±"):
        print(sound)
```
é€² REPL åšé»å¯¦é©—ï¼š

```
# ä¸€èˆ¬æ–¹æ³•
>>> Duck.all
<function Duck.all>

# éœæ…‹æ–¹æ³•
>>> Duck.make_sound
<function Duck.make_sound>

# é¡åˆ¥æ–¹æ³•
>>> Duck.walk
<bound method Duck.walk of <class '__main__.Duck'>>
```

é›–ç„¶çœ‹èµ·ä¾†æ²’å·®åˆ¥ï¼Œä¸éå¾å¯¦é«”çš„è§’åº¦çœ‹é‚„æ˜¯æœ‰å·®ç•°ï¼š

```
>>> donald = Duck()

# ä¸€èˆ¬æ–¹æ³•
>>> donald.all
<bound method Duck.all of <__main__.Duck object>>

# é¡åˆ¥æ–¹æ³•
>>> donald.walk
<bound method Duck.walk of <class '__main__.Duck'>>

# éœæ…‹æ–¹æ³•
>>> donald.make_sound
<function Duck.make_sound>
```

éœæ…‹æ–¹æ³•ä¾èˆŠåªæ˜¯ä¸€èˆ¬çš„å‡½æ•¸è€Œå·²ï¼Œä¹Ÿä¸æœƒå·æ¸¡ä¸€äº›çœ‹ä¸åˆ°çš„åƒæ•¸é€²å»ã€‚

### ç¹¼æ‰¿

```py
class Primate:
    def grab(self, something=None):
        if something:
            return f"æŠ“{something}"

        return "æŠ“æ±è¥¿"
```

åœ¨ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆè£¡æœ‰å€‹`ã€Œç¹¼æ‰¿ï¼ˆInheritanceï¼‰ã€`çš„è¨­è¨ˆå¯ä»¥é€™æ¨£å¯«ï¼š
```py
class Primate:
    def grab(self, something=None):
        if something:
            return f"æŠ“{something}"

        return "æŠ“æ±è¥¿"

class Human(Primate):
    pass

class Monkey(Primate):
    pass
```
ã€Œ`Human`é¡åˆ¥ç¹¼æ‰¿è‡ª `Primate` é¡åˆ¥ã€ä»¥åŠã€Œ`Monkey` é¡åˆ¥ç¹¼æ‰¿è‡ª `Primate` é¡åˆ¥ã€ï¼Œé€™æ¨£ä¸€ä¾†ï¼Œå°±ç®— `Human` è·Ÿ `Monkey` é¡åˆ¥ä»€éº¼éƒ½æ²’å¯«ï¼Œç¹¼æ‰¿çš„è¨­è¨ˆå¯ä»¥è®“æˆ‘å€‘å¯ä»¥æŠŠå…±é€šçš„åŠŸèƒ½å¯«åœ¨ä¸Šå±¤é¡åˆ¥è£¡ï¼Œå°±ä¸ç”¨ä¸€ç›´é‡è¤‡å¯«ä¸€æ¨£çš„ç¨‹å¼ç¢¼äº†

```py
>>> goku = Monkey()
>>> someone = Human()
>>> goku.grab("é¦™è•‰")
'æŠ“é¦™è•‰'
>>> someone.grab("éŒ¢éŒ¢")
'æŠ“éŒ¢éŒ¢'
```

#### æ²’å¯«å°±æ²’ç¹¼æ‰¿å—?

```py
class Animal:
    pass
class Mammal(Animal):
    pass
class Cat(Mammal):
    pass
```
é›–ç„¶ä»¥ä¸Šçš„ç¨‹å¼ç¢¼æ²’æœ‰æ˜ç¢ºå¯«å‡ºç¹¼æ‰¿è‡ªå“ªå€‹é¡åˆ¥ï¼ŒPython åœ¨é€™ç¨®æƒ…æ³æœƒåœ¨å¹«æˆ‘å€‘å·å·ç¹¼æ‰¿ä¸€å€‹åç‚º `object` çš„é¡åˆ¥ã€‚æˆ‘å€‘å¯ä»¥é€éé¡åˆ¥èº«ä¸Šçš„`.mro()`æ–¹æ³•æˆ–æ˜¯`__mro__`å±¬æ€§çœ‹åˆ°é€™å€‹é¡åˆ¥çš„ç¥–å®—åå…«ä»£

```
>>> Cat.mro()
(<class '__main__.Cat'>, <class '__main__.Mammal'>, <class '__main__.Animal'>, <class 'object'>)
>>> Cat.__mro__
(<class '__main__.Cat'>, <class '__main__.Mammal'>, <class '__main__.Animal'>, <class 'object'>)
>>> Mammal.__mro__
(<class '__main__.Mammal'>, <class '__main__.Animal'>, <class 'object'>)
>>> Animal.__mro__
(<class '__main__.Animal'>, <class 'object'>)
```
ä»€éº¼æ˜¯`MRO`? MROæ˜¯Method Resolution Orderçš„ç¸®å¯«ï¼Œæ„æ€æ˜¯Pythonåœ¨æŸ¥æ‰¾æ–¹æ³•æ™‚å€™çš„å°‹æ‰¾é †åºã€‚  
å‰é¢æœ‰æéï¼Œè¦åœ¨æŸå€‹ç‰©ä»¶è£¡æ‰¾å±¬æ€§æˆ–æ˜¯æ–¹æ³•çš„æ™‚å€™ï¼Œæœƒçœ‹é€™é¡†ç‰©ä»¶è‡ªå·±æœ‰æ²’æœ‰ï¼Œæ²’æœ‰åŒ¯å¾€å®ƒçš„æ‰€å±¬é¡åˆ¥æ‰¾ï¼Œ
å†æ²’æœ‰æœƒå¾€æ‰€å±¬é¡åˆ¥çš„ä¸Šå±¤é¡åˆ¥æ‰¾ï¼Œç›´åˆ°æ‰¾ä¸åˆ°ç‚ºæ­¢ã€‚  

å¾çµæœä¾†çœ‹ï¼Œæœ€æœ«ç«¯éƒ½æ˜¯`object`é¡åˆ¥ï¼Œå¦‚æœæ²’æœ‰ç‰¹åˆ¥æ¨™è¨»ä¸Šå±¤é¡åˆ¥çš„è©±ï¼Œä¸Šå±¤é¡åˆ¥å°±æ˜¯å…§å»ºçš„`object`é¡åˆ¥

#### è¦†å¯«æ–¹æ³•
ç•¶ç¹¼æ‰¿è‡ªä¸Šå±¤é¡åˆ¥æ™‚ï¼Œå¦‚æœé¡åˆ¥è£¡é¢æœ‰è·Ÿä¸Šå±¤é¡åˆ¥åŒåçš„æ–¹æ³•æ™‚ï¼Œæœƒç™¼ç”Ÿä»€éº¼äº‹æƒ…ï¼Ÿ  

```py
class Animal:
def walk(self):
    print("animal is walking")

class Cat:
    def walk(self):
        print("Cat is walking")

kitty=Cat()
kitty.walk() # æœƒæ˜¯å“ªä¸€å€‹ walkï¼Ÿ
```
ä»¥ä¸Šç¨‹å¼ç¢¼ç¨±ä¹‹Overrideï¼Œã€Œto be more important than somethingã€çš„æ„æ€ï¼Œç¿»è­¯ç‚ºã€Œè¦†å¯«ã€ï¼Œé›–ç„¶å«è¦†å¯«ï¼Œä¸éåŒåæ–¹æ³•ä¸¦æ²’ä¹Ÿè¢«æ¶ˆæ»…ï¼Œåªæ˜¯å„ªå…ˆé †åºä¸Šæ’åˆ°æ¯”è¼ƒå¾Œé¢è€Œå·²ã€‚  

å‰›å‰›æåˆ°çš„MROï¼ŒPythonå†æœå°‹å±¬æ€§æˆ–æ–¹æ³•çš„æµç¨‹ï¼Œé™¤äº†ç‰©ä»¶æœ¬èº«ï¼Œæœƒå…ˆå¾ç‰©ä»¶çš„æ‰€å±¬é¡åˆ¥é–‹å§‹æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°å°±åŸ·è¡Œï¼Œæ‰¾ä¸åˆ°å°±å¾€ä¸Šå±¤é¡åˆ¥æ‰¾ã€‚æ‰€ä»¥æˆ‘å€‘å‘¼å«`kitty.walk()`çš„æ™‚å€™ï¼ŒPythonæœƒå…ˆæ‰¾`Cat`é¡åˆ¥æœ‰æ²’æœ‰`walk()`æ–¹æ³•ã€‚

ä¹Ÿå°±æ˜¯èªªï¼Œä¸¦æ²’æœ‰è¦†è“‹ä¸Šå±¤çš„`Animal`é¡åˆ¥çš„æ–¹æ³•ï¼Œåªæ˜¯åœ¨MROçš„å„ªå…ˆé †åºæ‰¾åˆ°å°æ‡‰çš„æ–¹æ³•ï¼ŒåŸæœ¬ä¸Šå±¤çš„é¡åˆ¥é‚„æ˜¯å­˜åœ¨ã€‚

#### åŸ·è¡Œä¸Šå±¤é¡åˆ¥çš„æ–¹æ³•
```PY
class Animal:
    def walk(self):
        print("Animal is walking")

    def eat(self, food):
        print(f"{food} is yummy!")

class Cat(Animal):
    def walk(self):
        Animal.eat(self,"ç½ç½") #åŠ ä¸Šé€™ä¸€è¡Œæœƒè¼¸å‡ºï¼ŒCat is walkingã€ ç½ç½is yummy!
        print("Cat is walking")
```

ä»¥ä¸Šç¨‹å¼ç¢¼å¯ä»¥æ”¹å¯«æˆï¼š
```PY
class Animal:
    def walk(self):
        print("Animal is walking")

    def eat(self, food):
        print(f"{food} is yummy!")

class Cat(Animal):
    def walk(self):
        super().eat("ç½ç½")  #superæœƒåšå‡ºä¸€å€‹å¯¦é«”å‡ºä¾†ï¼Œæœƒå‘¼å«eat()
        print("Cat is walking")
```
ä¸éç‚ºä»€éº¼è¦æ”¹å¯«æˆ`super()` ?

1. **é™ä½è€¦åˆåº¦**
ç›´æ¥å‘¼å«çˆ¶é¡åˆ¥çš„çš„æ–¹æ³•(Animal.eat(self,"ç½ç½"))ï¼ŒæœƒæŠŠçˆ¶é¡åˆ¥çš„åç¨±ç¡¬ç·¨åˆ°å­é¡åˆ¥ä¸­ï¼Œå¦‚æœæ—¥å¾Œè¦æ›´æ”¹ç¹¼æ‰¿çµæ§‹æˆ–æ˜¯çˆ¶é¡åˆ¥åç¨±ï¼Œå°±è¦åŒæ­¥ä¿®æ”¹å­é¡åˆ¥çš„ç¨‹å¼ç¢¼ã€‚  
è€Œä½¿ç”¨ `super()` å‰‡ä¸éœ€è¦é¡¯å¼æŒ‡å®šçˆ¶é¡åˆ¥åç¨±ï¼Œä½¿å¾—é¡åˆ¥ä¹‹é–“çš„è€¦åˆåº¦é™ä½ï¼Œç¶­è­·æ€§æ›´å¥½ã€‚

2. **æ”¯æ´å¤šé‡ç¹¼æ‰¿**
åœ¨å¤šé‡ç¹¼æ‰¿ä¸‹ï¼Œä½¿ç”¨`super()`å¯ä»¥ä¾æ“šæ–¹æ³•è§£æé †åº(MROï¼ŒMethod Resolution Order)æ­£ç¢ºåœ°æ‰¾åˆ°ä¸‹ä¸€å€‹æ‡‰è©²è¢«å‘¼å«çš„æ–¹æ³•ï¼Œç›´æ¥æŒ‡å®šçˆ¶é¡åˆ¥æœƒå®¹æ˜“å¿½ç•¥å¤šé‡ç¹¼æ‰¿çš„å±¤ç´šè·Ÿé †åºï¼Œå¯èƒ½æœƒå°è‡´éŒ¯èª¤çš„è¡Œç‚ºæˆ–é‡è¤‡å‘¼å«åŒä¸€æ–¹æ³•ã€‚

3. **èªæ„æ¸…æ¥šç›´è¦º**
ä½¿ç”¨`super()`ï¼Œå¯ä»¥æ›´ç›´è§€çš„è¡¨é”ã€Œå‘¼å«çˆ¶é¡åˆ¥çš„æ–¹æ³•ã€æ„åœ–ï¼Œç•¶é–±è®€ç¨‹å¼ç¢¼çš„æ™‚å€™ `super().eat("ç½ç½")`
å¯ä»¥ç«‹åˆ»ç†è§£é€™æ˜¯åœ¨å‘¼å«ä¸Šä¸€å±¤(çˆ¶å±¤)çš„`eat`æ–¹æ³•ï¼Œè€Œä¸å¿…å»è¿½è¹¤ç¡¬ç·¨ç¢¼çš„çˆ¶é¡åˆ¥åç¨±ã€‚

4. **å®¹æ˜“æ“´å±•èˆ‡é‡æ§‹**
`super()` çš„ä½¿ç”¨ä½¿å¾—é€™ç¨®è®ŠåŒ–æ›´å®¹æ˜“è™•ç†ï¼Œå› ç‚ºä½ ä¸éœ€è¦æ‰‹å‹•èª¿æ•´æ¯å€‹å­é¡åˆ¥ä¸­å°çˆ¶é¡åˆ¥æ–¹æ³•çš„èª¿ç”¨ã€‚é€™å°æ–¼ç¶­è­·å¤§å‹ç³»çµ±éå¸¸é‡è¦ã€‚

#### ä½ æ˜¯æˆ‘çš„å¾Œä»£å— ?

```py
class Animal:
    pass
class Mammal(Animal):
    pass
class Cat(Mammal):
    pass
class Bird(Animal):
    pass
```
Python æœ‰å€‹å…§å»ºå‡½æ•¸`issubclass()`ï¼Œæ˜¯ç”¨ä¾†åˆ¤æ–·æ˜¯ä¸æ˜¯æŸå€‹é¡åˆ¥çš„è¡ç”Ÿé¡åˆ¥ï¼š
```py
>>> issubclass(Cat, Mammal)
True
>>> issubclass(Cat, Animal)
True
>>> issubclass(Cat, Bird)
False
>>> issubclass(Cat, object)
Trues
```
é€™è£¡çš„`issubclass()`å‡½æ•¸å¯ç”¨ä¾†åˆ¤æ–·ã€Œæ˜¯ä¸€ç¨®ï¼ˆis kind ofï¼‰ã€çš„é—œä¿‚ï¼Œä¾‹å¦‚ï¼Œ`Cat` æ˜¯ä¸€ç¨® `Mammal`ï¼ŒåŒæ™‚ä¹Ÿæ˜¯ä¸€ç¨® `Animal`ï¼Œä¸é `Bird` åŒæ¨£éƒ½æ˜¯ä¸€ç¨® Animal ä½†å°±è·Ÿ `Cat `é¡åˆ¥å°±æ²’æœ‰ç¹¼æ‰¿é—œä¿‚ã€‚æœ€å¾Œä¸€å€‹ä¾‹å­æ˜¯ `object` é¡åˆ¥ï¼Œå‰é¢æåˆ°åªè¦æ²’ç‰¹åˆ¥æ¨™ç¤ºä¸Šå±¤é¡åˆ¥çš„ï¼Œä¾‹å¦‚ `Animal` é¡åˆ¥å°±æ˜¯ï¼ŒPython æœƒè®“å®ƒçš„ä¸Šå±¤é¡åˆ¥è‡ªå‹•è®Šæˆ `object` é¡åˆ¥ï¼Œæ‰€ä»¥ `issubclass(Cat, object)`æœƒå›å‚³ `True`ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥å»£ç¾©çš„èªªæ‰€æœ‰çš„é¡åˆ¥éƒ½æ˜¯ `object` çš„è¡ç”Ÿé¡åˆ¥ã€‚


```py
kitty = Cat()
```

é€™æ™‚ `kitty` ç‰©ä»¶è·Ÿ `Cat` é¡åˆ¥ä¹‹é–“ä¸¦ä¸æ˜¯ã€Œæ˜¯ä¸€ç¨®ã€çš„é—œä¿‚ï¼Œè€Œæ˜¯ã€Œæ˜¯ä¸€å€‹ï¼ˆis aï¼‰ã€çš„é—œä¿‚ã€‚

è¦åˆ¤æ–·æŸå€‹ç‰©ä»¶æ˜¯ä¸æ˜¯æŸå€‹é¡åˆ¥çš„å¯¦é«”ï¼Œæœ‰å¹¾ç¨®æ–¹å¼ï¼Œç”¨`__class__`å±¬æ€§æˆ–æ˜¯å…§å»ºå‡½æ•¸`type()`éƒ½å¯ä»¥æŸ¥åˆ°é€™é¡†ç‰©ä»¶æ˜¯ç”±å“ªä¸€å€‹é¡åˆ¥æ‰€å»ºç«‹çš„ã€‚Python æœ‰å€‹å…§å»ºå‡½æ•¸ `isinstance()`ä¹Ÿèƒ½åšåˆ°é¡ä¼¼çš„åˆ¤æ–·ï¼Œä½†ç¯„åœæ›´å»£ä¸€é»ã€‚

```
>>> isinstance(kitty, Cat)
True
>>> isinstance(kitty, Bird)
False
>>> isinstance(kitty, Animal)
True
>>> isinstance(kitty, object)
True
```
è·Ÿ`type()`å‡½æ•¸æ¯”è¼ƒæ˜é¡¯çš„å·®ç•°åœ¨æ–¼`isinstance()`å‡½æ•¸åœ¨åˆ¤æ–·çš„æ™‚å€™ï¼Œå³ä¾¿ä¸æ˜¯ç›´æ¥ç”¢ç”Ÿå®ƒçš„é¡åˆ¥ï¼Œä¾‹å¦‚ `Animal` ç”šè‡³æ˜¯æœ€ä¸Šå±¤çš„ `object` é¡åˆ¥ï¼Œåˆ¤æ–·çš„çµæœéƒ½æœƒæ˜¯ `True`ã€‚  

æ‰€ä»¥å“ªå€‹æ¯”è¼ƒå¥½ç”¨ï¼Ÿ
å¦‚æœåªæ˜¯è¦çŸ¥é“ç‰©ä»¶æ˜¯ä¸æ˜¯ç”±æŸå€‹ç‰¹å®šé¡åˆ¥æ‰€å»ºç«‹çš„ï¼Œä½¿ç”¨`type()`å‡½æ•¸åˆ¤æ–·æœƒæ¯”è¼ƒç²¾æº–ã€‚
å¦‚æœåªæ˜¯æƒ³çŸ¥é“ç‰©ä»¶æœ‰æ²’æœ‰æŸç¨®é¡åˆ¥çš„ç‰¹å®šè¡Œç‚ºï¼Œç”¨`isinstance()`æœƒæ¯”è¼ƒç°¡å–®ã€‚

#### å¤šé‡ç¹¼æ‰¿
 å¤šé‡ç¹¼æ‰¿ï¼ˆMultiple Inheritanceï¼‰ï¼Œä¸€å€‹é¡åˆ¥å¯ä»¥åŒæ™‚ç¹¼æ‰¿å¤šå€‹é¡åˆ¥ï¼Œå¯ä»¥å…ˆä¾†çœ‹çœ‹æ€éº¼å¯«

 ```py
class Animal:
    def sleep(self):
        print("Zzzzz")

class Bird(Animal):
    def fly(self):
        print("I blieve I can fly â™«â™ª")

class Fish(Animal):
    def dive(self):
        print("Dive!!")

class Cat(Bird, Fish):
    pass
 ```
 `Cat` é¡åˆ¥å¯ä»¥åŒæ™‚ç¹¼æ‰¿ `Bird` ä»¥åŠ` Fish` é¡åˆ¥ï¼Œå¯«æ³•å°±æ˜¯åœ¨é¡åˆ¥åç¨±å¾Œé¢åŠ ä¸Šè¦ç¹¼æ‰¿çš„é¡åˆ¥åç¨±ï¼Œä¸¦ä½¿ç”¨é€—è™Ÿéš”é–‹ã€‚é€™æ¨£ä¸€ä¾†ï¼Œ`Cat` é¡åˆ¥å°±åŒæ™‚æ“æœ‰äº† `Bird`ã€`Fish` ä»¥åŠ `Animal` é€™ä¸‰å€‹é¡åˆ¥çš„æ‰€æœ‰æ–¹æ³•ï¼š

```py
>>> kitty = Cat()

# é‚„æ˜¯å¯ä»¥ç¡è¦º
>>> kitty.sleep()
Zzzzz

# å¯ä»¥ä¸‹æµ·
>>> kitty.dive()
Dive!!

# ä¹Ÿå¯ä»¥é£›å¤©
>>> kitty.fly()
I blieve I can fly â™«â™ª
```

ä¸éå¤šé‡ç¹¼æ‰¿æœƒé‡åˆ°å¹¾å€‹å•é¡Œ

#### é‘½çŸ³å•é¡Œ
èˆ‰ä¾‹ä¾†èªªï¼Œ`Animal` é¡åˆ¥æœ¬ä¾†å°±æœ‰å¯¦ä½œäº† `.sleep()` æ–¹æ³•ï¼Œä½† Bird ä»¥åŠ Fish ä¹Ÿæœ‰è‡ªå·±çš„ `.sleep()` æ–¹æ³•ï¼š
```py
class Animal:
    def sleep(self):
        print("Zzzzz")

class Bird(Animal):
    def sleep(self):
        print("æˆ‘å¯ä»¥ç«™è‘—ç¡è¦º")

class Fish(Animal):
    def sleep(self):
        print("æˆ‘ç¡è¦ºä¸ç”¨é–‰çœ¼ç›")

class Cat(Bird, Fish):
    pass
```
åªçœ‹ .sleep() å°±å¥½ã€‚é€™æ™‚å€™çš„ç¹¼æ‰¿ç‹€æ…‹å¤§æ¦‚åƒé€™æ¨£ï¼š
```
   A      Animal(A)
  / \
 B   F    Bird(B), Fish(F)
  \ /
   C      Cat(C)

```

é€™å€‹å°ˆæœ‰åè©å«ã€Œé‘½çŸ³å•é¡Œï¼ˆDiamond Problemï¼‰ã€ï¼Œæ˜¯æŒ‡ä¸€å€‹é¡åˆ¥åŒæ™‚ç¹¼æ‰¿å…©å€‹é¡åˆ¥ï¼Œè€Œé€™å…©å€‹é¡åˆ¥åˆåŒæ™‚ç¹¼æ‰¿è‡ªåŒä¸€å€‹é¡åˆ¥ï¼Œé€™æ¨£çš„ç¹¼æ‰¿é—œä¿‚å°±æœƒå½¢æˆä¸€å€‹é‘½çŸ³çš„å½¢ç‹€ï¼Œä½†å…¶å¯¦æ›´åƒå€‹è±å½¢ï¼Œæ‰€ä»¥æœ‰æ™‚å€™åˆç¨±ä¹‹è±å½¢ç¹¼æ‰¿ã€‚

```py
kitty = Cat()
kiity.sleep()  # æœƒåŸ·è¡Œå“ªå€‹ .sleep() æ–¹æ³•ï¼Ÿ
```

æœƒåŸ·è¡Œå“ªä¸€å€‹é¡åˆ¥çš„ `.sleep()` æ–¹æ³•ï¼Ÿ
ç­”æ¡ˆæ˜¯ `Bird` é¡åˆ¥çš„ `.sleep()` æ–¹æ³•æœƒè¢«åŸ·è¡Œã€‚

ä¾†çœ‹ä¸€ä¸‹MRO
```
>>> Cat.mro()
[<class '__main__.Cat'>,
 <class '__main__.Bird'>,
 <class '__main__.Fish'>,
 <class '__main__.Animal'>,
 <class 'object'>]
```

Pythonåœ¨è™•ç†å¤šé‡ç¹¼æ‰¿çš„æ™‚å€™ï¼Œæœ‰è‡ªå·±ä¸€å¥—æ¼”ç®—æ³•è¨ˆç®—å‡ºMROçš„é †åºï¼Œä¾ä¸Šé¢çš„ä¾‹å­ä¾†èªªMROçš„é †åºæ˜¯ç”±å°æ‹¬è™Ÿå…§çš„é¡åˆ¥é †åºæ±ºå®šçš„ã€‚
